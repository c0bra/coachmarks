!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.coachmarks=e()}(this,function(){"use strict";function t(...e){return t.addOrGet(...e)}function e(){Object.values(t.all()).forEach(t=>{t.showing&&(t.showing=!1)}),l.forEach(e=>{const n=t(e);n instanceof Node&&(n.remove(),t.remove(e))})}function n(){Object.keys(t.all()).forEach(e=>{const n=t(e);n instanceof Node||n.showing&&o(e)})}function o(n){const o=t(n);if(!o)throw new Error(`Coachmark with name '${n}' not found`);o.showing=!0;!function(e,n){const o=c(e),r=c(n);let a=i(o,r),h=i(r,o);a=i(a,r),h=i(h,o);const l=s().M(a[0],a[1]).L(h[0],h[1]).str(),d=t.default("svg",()=>(function(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("class","coachmark-svg"),t})()),f=t.default("path",()=>document.createElementNS("http://www.w3.org/2000/svg","path"));f.setAttribute("d",l),f.setAttribute("class","coachmark-line"),f.setAttribute("stroke-width","5"),f.setAttribute("fill","none"),f.setAttribute("filter","url(#coachmark-chalk)"),f.setAttribute("marker-end","url(#arrow)"),f.parentNode||d.appendChild(f);d.parentNode||document.body.insertBefore(d,document.body.firstChild)}(function(n){if(!n)throw new Error(`Coachmark with name '${name}' not found`);const o=t.default("elm",()=>document.querySelector(n.target));-1===o.className.indexOf("draggable-source")&&(o.className+=" draggable-source");o.style.position="absolute",o.style["z-index"]=102;const i=window.getComputedStyle(o).getPropertyValue("border-radius"),r=o.offsetTop,c=o.offsetLeft,a=o.offsetWidth,s=o.offsetHeight,h=c+a,l=r+s,d=t.default("coachTop",()=>document.createElement("div"));d.className="coachmark-top";const f=t.default("coachLeft",()=>document.createElement("div"));f.className="coachmark-left";const p=t.default("coachRight",()=>document.createElement("div"));p.className="coachmark-right";const u=t.default("coachBottom",()=>document.createElement("div"));u.className="coachmark-bottom",d.style.height=r+"px",f.style.top=r+"px",p.style.top=f.style.top,f.style.height=s+"px",p.style.height=f.style.height,f.style.width=c+"px",p.style.left=h+"px",u.style.top=l+"px";const m=t.default("glow",()=>document.createElement("div"));m.className="coachmark-glow",m.style.top=r+"px",m.style.left=c+"px",m.style.width=a+"px",m.style.height=s+"px",m.style["border-radius"]=i,m.style["box-shadow"]="0 0 20px 10px #fff";const g=function(){const n=t.default("closeButton",()=>document.createElement("div"));return n.setAttribute("class","coachmark-close"),n.innerHTML="X",n.addEventListener("click",()=>e()),n}();return[d,f,p,u,m,g].forEach(t=>{t.parentNode||document.body.appendChild(t)}),o}(o),function(e){const n=t.default("text",()=>document.createElement("div")),o=t("elm");if(!o)throw new Error("Could not get element from cache");const[i,c]=function(){const t=document.body.offsetWidth,e=document.body.offsetHeight;let n,o;if(t>e){const i=Math.floor(t/2);n={top:0,left:0,height:e,width:i},o={top:0,left:i,height:e,width:t-i}}else{const i=Math.floor(e/2);n={top:0,left:0,height:i,width:t},o={top:i,left:0,height:e-i,width:t}}return[n,o]}();let a,s=r(o);a=function({x:t,y:e},{left:n,top:o,width:i,height:r}){return console.log(arguments),console.log(t,e,n,o,i,r),n<=t&&t<=n+i&&o<=e&&e<=o+r}(s={x:Math.floor(s[0]),y:Math.floor(s[1])},i)?c:i;const h=t.default("textContainer",()=>document.createElement("div"));return h.className="coachmark-text-container",h.style.top=a.top,h.style.left=a.left,h.style.width=a.width,h.style.height=a.height,h.appendChild(n),document.body.appendChild(h),n.className="coachmark-text draggable-source",n.textContent=e,n}(o.text))}function i(t,e){Object.prototype.hasOwnProperty.call(t,"top")&&(t=r(t));const n={leftTop:[e.left,e.top],middleTop:[e.left+e.width/2,e.top],rightTop:[e.left+e.width,e.top],rightMiddle:[e.left+e.width,e.top+e.height/2],rightBottom:[e.left+e.width,e.top+e.height],middleBottom:[e.left+e.width/2,e.top+e.height],leftBottom:[e.left,e.top+e.height],leftMiddle:[e.left,e.top+e.height/2]};let o={point:[0,0],dist:1/0},i="";Object.keys(n).forEach(e=>{const r=n[e],c=a(t,r);c<o.dist&&(o={point:r,dist:c},i=e)}),i=i.toLowerCase();const c=o.point;return-1!==i.indexOf("top")&&(c[1]-=h),-1!==i.indexOf("bottom")&&(c[1]+=h),-1!==i.indexOf("left")&&(c[0]-=h),-1!==i.indexOf("right")&&(c[0]+=h),c}function r(t){let e=t;return t instanceof Node&&(e=c(t)),[e.left+e.width/2,e.top+e.height/2]}function c(t,e){!0===e&&(e=t.offsetParent);const n=t.getBoundingClientRect(),o=e?e.getBoundingClientRect():{left:0,top:0};return{left:n.left-o.left,top:n.top-o.top,width:n.width,height:n.height}}t.init=(()=>{t.cache||(t.cache={})}),t.addOrGet=((e,n)=>(t.init(),void 0===n?t.get(e):(t.add(e,n),n))),t.get=(e=>(t.init(),t.cache[e])),t.add=((e,n)=>(t.init(),t.cache[e]=n,n)),t.remove=(e=>{t.init(),e&&delete t.cache[e]}),t.clear=(()=>{t.init();for(const e of t.cache)t.cache[e]=void 0}),t.default=((e,n)=>{const o=t(e);return void 0===o?t(e,n.call()):o}),t.all=(()=>(t.init(),t.cache)),t.allArray=(()=>{t.init();const e=[];for(const n in t)Object.prototype.hasOwnProperty.call(t.cache,n)&&e.push({key:t.cache[n]});return e});var a=function(t,e){return Math.sqrt(function(t,e){var n,o=0;for(n=0;n<t.length;n++)o+=Math.pow(t[n]-e[n],2);return o}(t,e))},s=("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self,function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(e,n){t.exports=n()}(0,function(){function t(){if(!(this instanceof t))return new t;this.relative=!1,this.commands=[]}function e(t){var e=t.length>0&&t.slice?t:Array.prototype.slice.call(arguments,0);this.name=e[0],this.args=e.slice(1)}var n=["M","Z","L","H","V","C","S","Q","T","A"],o=n.map(function(t){return t.toLowerCase()}),i=n.concat(o);return t.prototype.rel=function(){return this.relative=!0,this},t.prototype.abs=function(){return this.relative=!1,this},t.prototype.close=function(){return this.Z()},t.prototype.to=function(t,e){var n="object"==typeof t?t:{x:t,y:e};return this._cmd("M")(n.x,n.y)},t.prototype.line=function(t,e){var n="object"==typeof t?t:{x:t,y:e};return this._cmd("L")(n.x,n.y)},t.prototype.hline=function(t){return this._cmd("H")(t)},t.prototype.vline=function(t){return this._cmd("V")(t)},t.prototype.bezier3=function(t,e,n,o,i,r){var c="object"==typeof t,a=c?arguments.length<3:arguments.length<6,s={x:t,y:e},h={x:n,y:o},l=a?h:{x:i,y:r};return c&&(s=t,h=e,l=a?h:n),a?this._cmd("S")(s.x,s.y,l.x,l.y):this._cmd("C")(s.x,s.y,h.x,h.y,l.x,l.y)},t.prototype.bezier2=function(t,e,n,o){var i="object"==typeof t,r=i?arguments.length<2:arguments.length<4,c={x:t,y:e},a=r?c:{x:n,y:o};return i&&(c=t,a=r?c:e),r?this._cmd("T")(a.x,a.y):this._cmd("Q")(c.x,c.y,a.x,a.y)},t.prototype.arc=function(t,e,n,o,i,r,c){var a="object"==typeof r?r:{x:r,y:c};return this._cmd("A")(t,e,n,o,i,a.x,a.y)},t.prototype.str=function(){return this.commands.map(function(t){return t.toString()}).join(" ")},i.forEach(function(n){t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n);var o=new e(t);return this.commands.push(o),this}}),t.prototype._cmd=function(t){return this[this.relative?t.toLowerCase():t.toUpperCase()].bind(this)},e.prototype.toString=function(){return this.name+" "+this.args.join(" ")},t})}));const h=20,l=["text","textContainer","coachTop","coachLeft","coachRight","coachBottom","glow","closeButton","svg","path"];!function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e)}}(".coachmark {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0;\n  padding: 0;\n  /*background: #000;*/\n  /*opacity: 0.60;*/\n  z-index: 100; }\n\n.coachmark-top,\n.coachmark-left,\n.coachmark-right,\n.coachmark-bottom {\n  position: fixed;\n  background: #000;\n  opacity: 0.66;\n  margin: 0;\n  padding: 0; }\n\n.coachmark-top {\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%; }\n\n.coachmark-left {\n  left: 0; }\n\n.coachmark-right {\n  right: 0; }\n\n.coachmark-bottom {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%; }\n\n.coachmark-glow {\n  position: absolute;\n  /*z-index: 101;*/\n  /*box-shadow: 0 0 120px 50px #fff;*/ }\n\n.coachmark-text-container {\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5vmin; }\n\n.coachmark-text {\n  font-size: 15vmin;\n  line-height: 15vmin;\n  color: #fefefe;\n  text-shadow: 2px 2px #333;\n  z-index: 2; }\n\n.coachmark-svg {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 1; }\n\n.coachmark-line {\n  stroke: #A7CC6B; }\n\npath.coachmark-line {\n  stroke-width: 1vmin; }\n\n.coachmark-close {\n  z-index: 9999;\n  background-color: #A7CC6B;\n  border-radius: 50%;\n  height: 56px;\n  width: 56px;\n  position: fixed;\n  top: 0;\n  right: 0;\n  color: #fff;\n  margin: 5vmin;\n  font-size: 36px;\n  line-height: 56px;\n  text-align: center;\n  cursor: pointer;\n  box-shadow: 0 2px 2px 0 rgba(255, 255, 255, 0.12), 0 1px 5px 0 rgba(255, 255, 255, 0.12), 0 3px 1px -2px rgba(255, 255, 255, 0.2); }\n");var d='  <defs>\n    <filter id="coachmark-chalk" x="0" y="0" height="5000px" width="5000px" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse">\n      <feTurbulence baseFrequency="0.133" seed="500" result="result1" numOctaves="1" type="turbulence"/>\n      <feOffset result="result2" dx="0" dy="0"/>\n      <feDisplacementMap scale="5" yChannelSelector="G" in2="result1" xChannelSelector="R" in="SourceGraphic"/>\n      <feGaussianBlur stdDeviation="0.5"/>\n    </filter>\n    <marker id="arrow" class="coachmark-line" markerWidth="10" markerHeight="8" refX="9.5" refY="4.5" orient="auto" markerUnits="strokeWidth">\n      \x3c!--<path d="M0,0 L0,6 L9,3 z" stroke="#fff" fill="#fff" />--\x3e\n      \x3c!--<polyline points="-2,-2 0,0 -2,2" stroke="#fff" fill="none" vector-effect="non-scaling-stroke" />--\x3e\n\n      \x3c!-- <polyline points="1 1, 9 5, 1 7" fill="none" /> --\x3e\n      <polyline points="1 1.5, 10 4.5, 2 7" fill="none" />\n    </marker>\n\n    \x3c!-- NOTE: arrowhead is not being used --\x3e\n    <marker id="arrowhead" viewBox="0 0 10 10" refX="3" refY="5" markerWidth="6" markerHeight="6" orient="auto">\n      <path d="M 0 0 L 10 5 L 0 10 z" />\n    </marker>\n  </defs>\n';document.addEventListener("DOMContentLoaded",()=>{!function(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("width",0),t.setAttribute("height",0),t.innerHTML=d,document.body.insertBefore(t,document.body.firstChild)}(),window.addEventListener("resize",()=>{requestAnimationFrame(()=>{n()})})});return{add(e,n={}){"string"!=typeof e&&(n=e,e=Math.random().toString(36).substr(2)),t(e,n)},show(t){e(),o(t)},cache:()=>t.cache,draw:o,redrawAll:n}});
//# sourceMappingURL=coachmarks.min.js.map
