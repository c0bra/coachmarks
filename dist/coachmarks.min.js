!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.coachmarks=t()}(this,function(){"use strict";function e(){return e.addOrGet.apply(e,arguments)}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e){return e?e.replace(/^mark\./,""):null}function a(){Object.values(e.all()).forEach(function(e){e.showing&&(e.showing=!1)}),w.forEach(function(t){var n=e(t);n instanceof Node&&(n.remove(),e.remove(t))});var t=e.get("leaderLine");t&&(t.remove(),e.remove("leaderLine"))}function i(){S(function(){Object.keys(e.all()).forEach(function(t){var n=e(t);n instanceof Node||n.showing&&o(t)})})}function o(t){0!==t.indexOf("mark.")&&(t="mark."+t);var n=e(t);if(!n)throw new Error("Coachmark with name '"+t+"' not found");n.showing=!0,n.name=t;var i=function(t){if(!t)throw new Error("Coachmark with name '"+name+"' not found");var n=e.default("elm",function(){return document.querySelector(t.target)});n.style["z-index"]=102;var i=window.getComputedStyle(n).getPropertyValue("border-radius"),r=n.offsetTop,l=n.offsetLeft,s=n.offsetWidth,u=n.offsetHeight,h=l+s,c=r+u,p=e.default("coachTop",function(){return document.createElement("div")});p.className="coachmark-top";var d=e.default("coachLeft",function(){return document.createElement("div")});d.className="coachmark-left";var f=e.default("coachRight",function(){return document.createElement("div")});f.className="coachmark-right";var m=e.default("coachBottom",function(){return document.createElement("div")});m.className="coachmark-bottom",p.style.height=r+"px",d.style.top=r+"px",f.style.top=d.style.top,d.style.height=u+"px",f.style.height=d.style.height,d.style.width=l+"px",f.style.left=h+"px",m.style.top=c+"px";var y=e.default("glow",function(){return document.createElement("div")});y.className="coachmark-glow",y.style.top=r+"px",y.style.left=l+"px",y.style.width=s+"px",y.style.height=u+"px",y.style["border-radius"]=i,y.style["box-shadow"]="0 0 20px 10px #fff";var g=function(t){var n="X",i=a;if(t.flow){var r=t.flow.getNext(t.name);r&&(n=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("class","coachmark-next-button");var t=document.createElementNS("http://www.w3.org/2000/svg","g");t.setAttribute("transform","scale(0.065), translate(100, 140)");var n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttribute("xlink:href","#right-arrow"),t.appendChild(n),e.appendChild(t),e.outerHTML}(),i=function(){o(r)})}var l=e.default("actionButton",function(){return document.createElement("div")});return l.setAttribute("class","coachmark-action-btn"),l.innerHTML=n,l.addEventListener("click",function(){i()}),l}(t);return[p,d,f,m,y,g].forEach(function(e){e.parentNode||document.body.appendChild(e)}),n}(n);!function(t,n){var a=e.get("leaderLine");a&&a.remove();a=new r(r.areaAnchor(t,{color:"transparency"}),r.areaAnchor(n,{color:"transparency"}),{endPlugColor:E,startPlugColor:E,endPlugSize:.5}),e.set("leaderLine",a),window.line=a,a.path="magnet",a.position();var i=document.querySelectorAll(".leader-line-line-path");Array.prototype.forEach.call(i,function(e){})}(function(t){var n=e.default("text",function(){return document.createElement("div")}),a=e("elm");if(!a)throw new Error("Could not get element from cache");var i=function(){var e=document.body.offsetWidth,t=document.body.offsetHeight,n=void 0,a=void 0;if(e>t){var i=Math.floor(e/2);n={top:0,left:0,height:t,width:i},a={top:0,left:i,height:t,width:e-i}}else{var o=Math.floor(t/2);n={top:0,left:0,height:o,width:e},a={top:o,left:0,height:t-o,width:e}}return[n,a]}(),o=x(i,2),r=o[0],l=o[1],s=function(e){var t=e;e instanceof Node&&(t=function(e,t){!0===t&&(t=e.offsetParent);var n=e.getBoundingClientRect(),a=t?t.getBoundingClientRect():{left:0,top:0};return{left:n.left-a.left,top:n.top-a.top,width:n.width,height:n.height}}(e));return[t.left+t.width/2,t.top+t.height/2]}(a),u=void 0;u=function(e,t){var n=e.x,a=e.y,i=t.left,o=t.top,r=t.width,l=t.height;return i<=n&&n<=i+r&&o<=a&&a<=o+l}(s={x:Math.floor(s[0]),y:Math.floor(s[1])},r)?l:r;var h=e.default("textContainer",function(){return document.createElement("div")});return h.className="coachmark-text-container",h.style.top=u.top,h.style.left=u.left,h.style.width=u.width,h.style.height=u.height,h.appendChild(n),document.body.appendChild(h),n.className="coachmark-text draggable-source",n.textContent=t,n}(n.text),i)}e.cache={},e.init=function(){},e.addOrGet=function(t,n){return e.init(),void 0===n?e.get(t):(e.add(t,n),n)},e.get=function(t){return e.init(),e.cache[t]},e.add=function(t,n){return e.init(),e.cache[t]=n,n},e.set=e.add,e.remove=function(t){e.init(),t&&delete e.cache[t]},e.clear=function(){e.init();var t=!0,n=!1,a=void 0;try{for(var i,o=e.cache[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;e.cache[r]=void 0}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}},e.default=function(t,n){var a=e(t);return void 0===a?e(t,n.call()):a},e.all=function(){return e.init(),e.cache},e.allArray=function(){e.init();var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e.cache,n)&&t.push({key:e.cache[n]});return t};for(var r=function(){function e(t,n){var a,i;return typeof t!=typeof n||(a=Ve(t)?"obj":Array.isArray(t)?"array":"")!=(Ve(n)?"obj":Array.isArray(n)?"array":"")||("obj"===a?e(i=Object.keys(t).sort(),Object.keys(n).sort())||i.some(function(a){return e(t[a],n[a])}):"array"===a?t.length!==n.length||t.some(function(t,a){return e(t,n[a])}):t!==n)}function t(e){return e?Ve(e)?Object.keys(e).reduce(function(n,a){return n[a]=t(e[a]),n},{}):Array.isArray(e)?e.map(t):e:e}function n(e){function t(e){var t=1,n=Ee.exec(e);return n&&(t=parseFloat(n[1]),n[2]?t=t>=0&&t<=100?t/100:1:(t<0||t>1)&&(t=1)),t}var n,a,i,o=1,r=e=(e+"").trim();return(n=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(e))?(a=n[1].toLowerCase(),i=n[2].trim().split(/\s*,\s*/),"rgba"===a&&4===i.length?(o=t(i[3]),r="rgb("+i.slice(0,3).join(", ")+")"):"hsla"===a&&4===i.length?(o=t(i[3]),r="hsl("+i.slice(0,3).join(", ")+")"):"hwb"===a&&4===i.length?(o=t(i[3]),r="hwb("+i.slice(0,3).join(", ")+")"):"gray"===a&&2===i.length?(o=t(i[1]),r="gray("+i[0]+")"):"device-cmyk"===a&&i.length>=5&&(o=t(i[4]),r="device-cmyk("+i.slice(0,4).join(", ")+")")):(n=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(e))?n[1]?(o=parseInt(n[2],16)/255,r="#"+n[1]):(o=parseInt(n[4]+n[4],16)/255,r="#"+n[3]):"transparent"===e.toLocaleLowerCase()&&(o=0),[o,r]}function a(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE||"function"!=typeof e.getBoundingClientRect)}function i(e,t){var n,a,i,o,r={};if(!(i=e.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;n=e.getBoundingClientRect();for(a in n)r[a]=n[a];if(!t){if(!(o=i.defaultView))return console.error("Cannot get window that contains the element."),null;r.left+=o.pageXOffset,r.right+=o.pageXOffset,r.top+=o.pageYOffset,r.bottom+=o.pageYOffset}return r}function o(e,t){var n,a,i=[],o=e;for(t=t||window;;){if(!(n=o.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(a=n.defaultView))return console.error("Cannot get window that contains the element."),null;if(a===t)break;if(!(o=a.frameElement))return console.error("`baseWindow` was not found."),null;i.unshift(o)}return i}function r(e,t){var n,a,r=0,l=0;return t=t||window,(a=o(e,t))?a.length?(a.forEach(function(e,t){var n=i(e,t>0);r+=n.left,l+=n.top,n=function(e){var t=e.ownerDocument.defaultView.getComputedStyle(e,"");return{left:e.clientLeft+parseFloat(t.paddingLeft),top:e.clientTop+parseFloat(t.paddingTop)}}(e),r+=n.left,l+=n.top}),n=i(e,!0),n.left+=r,n.right+=r,n.top+=l,n.bottom+=l,n):i(e):null}function l(e,t){var n=e.x-t.x,a=e.y-t.y;return Math.sqrt(n*n+a*a)}function s(e,t,n){var a=t.x-e.x,i=t.y-e.y;return{x:e.x+a*n,y:e.y+i*n,angle:Math.atan2(i,a)/(Math.PI/180)}}function u(e,t,n){var a=Math.atan2(e.y-t.y,t.x-e.x);return{x:t.x+Math.cos(a)*n,y:t.y+Math.sin(a)*n*-1}}function h(e,t,n,a,i){var o=i*i,r=o*i,l=1-i,s=l*l,u=s*l,h=u*e.x+3*s*i*t.x+3*l*o*n.x+r*a.x,c=u*e.y+3*s*i*t.y+3*l*o*n.y+r*a.y,p=e.x+2*i*(t.x-e.x)+o*(n.x-2*t.x+e.x),d=e.y+2*i*(t.y-e.y)+o*(n.y-2*t.y+e.y),f=t.x+2*i*(n.x-t.x)+o*(a.x-2*n.x+t.x),m=t.y+2*i*(n.y-t.y)+o*(a.y-2*n.y+t.y),y=l*e.x+i*t.x,g=l*e.y+i*t.y,S=l*n.x+i*a.x,v=l*n.y+i*a.y,_=90-180*Math.atan2(p-f,d-m)/Math.PI;return _+=_>180?-180:180,{x:h,y:c,fromP2:{x:p,y:d},toP1:{x:f,y:m},fromP1:{x:y,y:g},toP2:{x:S,y:v},angle:_}}function c(e,t,n,a,i){function o(e,t,n,a,i){return e*(e*(-3*t+9*n-9*a+3*i)+6*t-12*n+6*a)-3*t+3*n}var r,l,s,u,h,c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;return i=null==i||i>1?1:i<0?0:i,r=i/2,[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach(function(i,d){s=o(l=r*i+r,e.x,t.x,n.x,a.x),u=o(l,e.y,t.y,n.y,a.y),h=s*s+u*u,p+=c[d]*Math.sqrt(h)}),r*p}function p(e,t,n,a,i){for(var o,r=.5,l=1-r;o=c(e,t,n,a,l),!(Math.abs(o-i)<=.01);)r/=2,l+=(o<i?1:-1)*r;return l}function d(e,t){var n;return e.forEach(function(e){var a=t?e.map(function(e){var n={x:e.x,y:e.y};return t(n),n}):e;n||(n=[{type:"M",values:[a[0].x,a[0].y]}]),n.push(a.length?2===a.length?{type:"L",values:[a[1].x,a[1].y]}:{type:"C",values:[a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]}:{type:"Z",values:[]})}),n}function f(e){var t=[],n=0;return e.forEach(function(e){var a=(2===e.length?l:c).apply(null,e);t.push(a),n+=a}),{segsLen:t,lenAll:n}}function m(e,t){return null==e||null==t||e.length!==t.length||e.some(function(e,n){var a=t[n];return e.type!==a.type||e.values.some(function(e,t){return e!==a.values[t]})})}function y(e,t,n){e.events[t]?e.events[t].indexOf(n)<0&&e.events[t].push(n):e.events[t]=[n]}function g(e,t,n){var a;e.events[t]&&(a=e.events[t].indexOf(n))>-1&&e.events[t].splice(a,1)}function S(e){z&&clearTimeout(z),Ge.push(e),z=setTimeout(function(){Ge.forEach(function(e){e()}),Ge=[]},0)}function v(e,t){e.reflowTargets.indexOf(t)<0&&e.reflowTargets.push(t)}function _(e){e.reflowTargets.forEach(function(e){!function(e){setTimeout(function(){var t=e.parentNode,n=e.nextSibling;t.insertBefore(t.removeChild(e),n)},0)}(e)}),e.reflowTargets=[]}function x(e,t,n,a,i,o,r){var l,s,u;"auto-start-reverse"===n?("boolean"!=typeof j&&(t.setAttribute("orient","auto-start-reverse"),j=t.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),j?t.setAttribute("orient",n):((l=i.createSVGTransform()).setRotate(180,0,0),o.transform.baseVal.appendItem(l),t.setAttribute("orient","auto"),u=!0)):(t.setAttribute("orient",n),!1===j&&o.transform.baseVal.clear()),s=t.viewBox.baseVal,u?(s.x=-a.right,s.y=-a.bottom):(s.x=a.left,s.y=a.top),s.width=a.width,s.height=a.height,ke&&v(e,r)}function b(e,t){return{prop:e?"markerEnd":"markerStart",orient:t?t.noRotate?"0":e?"auto":"auto-start-reverse":null}}function E(e,t){Object.keys(t).forEach(function(n){var a=t[n];e[n]=null!=a.iniValue?a.hasSE?[a.iniValue,a.iniValue]:a.iniValue:a.hasSE?a.hasProps?[{},{}]:[]:a.hasProps?{}:null})}function w(e,t,n,a,i){return a!==t[n]&&(t[n]=a,i&&i.forEach(function(t){t(e,a,n)}),!0)}function k(e){function t(e,t){return e+=parseFloat(t)}var n=e.document,a=e.getComputedStyle(n.documentElement,""),i=e.getComputedStyle(n.body,""),o={x:0,y:0};return"static"!==i.position?(o.x-=[a.marginLeft,a.borderLeftWidth,a.paddingLeft,i.marginLeft,i.borderLeftWidth].reduce(t,0),o.y-=[a.marginTop,a.borderTopWidth,a.paddingTop,i.marginTop,i.borderTopWidth].reduce(t,0)):"static"!==a.position&&(o.x-=[a.marginLeft,a.borderLeftWidth].reduce(t,0),o.y-=[a.marginTop,a.borderTopWidth].reduce(t,0)),o}function O(e){var t,n=e.document;n.getElementById(oe)||(t=(new e.DOMParser).parseFromString(re,"image/svg+xml"),n.body.appendChild(t.documentElement),Te(e))}function M(e){function n(e,t){var n=t===Z?{x:e.left+e.width/2,y:e.top}:t===q?{x:e.right,y:e.top+e.height/2}:t===X?{x:e.left+e.width/2,y:e.bottom}:{x:e.left,y:e.top+e.height/2};return n.socketId=t,n}function a(e){return{x:e.x,y:e.y}}var i,o,u,d=e.options,f=e.curStats,m=e.aplStats,y=f.position_socketXYSE,g=!1;if(f.position_path=d.path,f.position_lineStrokeWidth=f.line_strokeWidth,f.position_socketGravitySE=i=t(d.socketGravitySE),o=[0,1].map(function(t){var n=d.anchorSE[t],a=e.optionIsAttach.anchorSE[t],i=!1!==a?je[n._id]:null,o=!1!==a&&i.conf.getStrokeWidth?i.conf.getStrokeWidth(i,e):0,l=!1!==a&&i.conf.getBBoxNest?i.conf.getBBoxNest(i,e,o):r(n,e.baseWindow);return f.capsMaskAnchor_pathDataSE[t]=!1!==a&&i.conf.getPathData?i.conf.getPathData(i,e,o):function(e){var t=null!=e.right?e.right:e.left+e.width,n=null!=e.bottom?e.bottom:e.top+e.height;return[{type:"M",values:[e.left,e.top]},{type:"L",values:[t,e.top]},{type:"L",values:[t,n]},{type:"L",values:[e.left,n]},{type:"Z",values:[]}]}(l),f.capsMaskAnchor_strokeWidthSE[t]=o,l}),function(){var e,t,a,i=-1;d.socketSE[0]&&d.socketSE[1]?(y[0]=n(o[0],d.socketSE[0]),y[1]=n(o[1],d.socketSE[1])):(d.socketSE[0]||d.socketSE[1]?(d.socketSE[0]?(t=0,a=1):(t=1,a=0),y[t]=n(o[t],d.socketSE[t]),(e=he.map(function(e){return n(o[a],e)})).forEach(function(e){var n=l(e,y[t]);(n<i||-1===i)&&(y[a]=e,i=n)})):(e=he.map(function(e){return n(o[1],e)}),he.map(function(e){return n(o[0],e)}).forEach(function(t){e.forEach(function(e){var n=l(t,e);(n<i||-1===i)&&(y[0]=t,y[1]=e,i=n)})})),[0,1].forEach(function(e){var t,n;d.socketSE[e]||(o[e].width||o[e].height?o[e].width||y[e].socketId!==Q&&y[e].socketId!==q?o[e].height||y[e].socketId!==Z&&y[e].socketId!==X||(y[e].socketId=y[e?0:1].y-o[e].top>=0?X:Z):y[e].socketId=y[e?0:1].x-o[e].left>=0?q:Q:(t=y[e?0:1].x-o[e].left,n=y[e?0:1].y-o[e].top,y[e].socketId=Math.abs(t)>=Math.abs(n)?t>=0?q:Q:n>=0?X:Z))}))}(),f.position_path!==m.position_path||f.position_lineStrokeWidth!==m.position_lineStrokeWidth||[0,1].some(function(e){return f.position_plugOverheadSE[e]!==m.position_plugOverheadSE[e]||function(e,t){return e.x!==t.x||e.y!==t.y||e.socketId!==t.socketId}(y[e],m.position_socketXYSE[e])||function(e,t){var n=null==e?"auto":Array.isArray(e)?"array":"number";return n!==(null==t?"auto":Array.isArray(t)?"array":"number")||("array"===n?e[0]!==t[0]||e[1]!==t[1]:e!==t)}(i[e],m.position_socketGravitySE[e])})){switch(e.pathList.baseVal=u=[],e.pathList.animVal=null,f.position_path){case J:u.push([a(y[0]),a(y[1])]);break;case $:!function(){var e="number"==typeof i[0]&&i[0]>0||"number"==typeof i[1]&&i[1]>0,t=be*(e?-1:1),n=Math.atan2(y[1].y-y[0].y,y[1].x-y[0].x),o=-n+t,r=Math.PI-n-t,s=l(y[0],y[1])/Math.sqrt(2)*xe,h={x:y[0].x+Math.cos(o)*s,y:y[0].y+Math.sin(o)*s*-1},c={x:y[1].x+Math.cos(r)*s,y:y[1].y+Math.sin(r)*s*-1};u.push([a(y[0]),h,c,a(y[1])])}();break;case ee:case te:!function(e){var t=[],n=[];y.forEach(function(a,i){var o,r,l,s,u,h=e[i];Array.isArray(h)?o={x:h[0],y:h[1]}:"number"==typeof h?o=a.socketId===Z?{x:0,y:-h}:a.socketId===q?{x:h,y:0}:a.socketId===X?{x:0,y:h}:{x:-h,y:0}:(r=y[i?0:1],l=f.position_plugOverheadSE[i],s=l>0?ye+(l>ge?(l-ge)*Se:0):de+(f.position_lineStrokeWidth>fe?(f.position_lineStrokeWidth-fe)*me:0),a.socketId===Z?((u=(a.y-r.y)/2)<s&&(u=s),o={x:0,y:-u}):a.socketId===q?((u=(r.x-a.x)/2)<s&&(u=s),o={x:u,y:0}):a.socketId===X?((u=(r.y-a.y)/2)<s&&(u=s),o={x:0,y:u}):((u=(a.x-r.x)/2)<s&&(u=s),o={x:-u,y:0})),t[i]=a.x+o.x,n[i]=a.y+o.y}),u.push([a(y[0]),{x:t[0],y:n[0]},{x:t[1],y:n[1]},a(y[1])])}([i[0],f.position_path===te?0:i[1]]);break;case ne:!function(){function e(e){return e===p?f:e===d?m:e===f?p:d}function t(e){return e===d||e===m?"x":"y"}function n(t,n,a){var i={x:t.x,y:t.y};if(a){if(a===e(t.dirId))throw new Error("Invalid dirId: "+a);i.dirId=a}else i.dirId=t.dirId;return i.dirId===p?i.y-=n:i.dirId===d?i.x+=n:i.dirId===f?i.y+=n:i.x-=n,i}function o(e,t){return t.dirId===p?e.y<=t.y:t.dirId===d?e.x>=t.x:t.dirId===f?e.y>=t.y:e.x<=t.x}function r(e,t){return t.dirId===p||t.dirId===f?e.x===t.x:e.y===t.y}function l(e){return e[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function s(e,t,n){return Math.abs(t[n]-e[n])}function h(e,t,n){return"x"===n?e.x<t.x?d:m:e.y<t.y?f:p}var c,p=1,d=2,f=3,m=4,g=[[],[]],S=[];for(y.forEach(function(t,o){var r=a(t),l=i[o];!function(e){r.dirId=e[0],l=e[1]}(Array.isArray(l)?l[0]<0?[m,-l[0]]:l[0]>0?[d,l[0]]:l[1]<0?[p,-l[1]]:l[1]>0?[f,l[1]]:[t.socketId,0]:"number"!=typeof l?[t.socketId,_e]:l>=0?[t.socketId,l]:[e(t.socketId),-l]),g[o].push(r),S[o]=n(r,l)});function(){var e,a,i,u,c=[o(S[1],S[0]),o(S[0],S[1])],p=[t(S[0].dirId),t(S[1].dirId)];if(p[0]===p[1]){if(c[0]&&c[1])return r(S[1],S[0])||(S[0][p[0]]===S[1][p[1]]?(g[0].push(S[0]),g[1].push(S[1])):(e=S[0][p[0]]+(S[1][p[1]]-S[0][p[0]])/2,g[0].push(n(S[0],Math.abs(e-S[0][p[0]]))),g[1].push(n(S[1],Math.abs(e-S[1][p[1]]))))),!1;c[0]!==c[1]?(a=l(c),(i=s(S[a.notContain],S[a.contain],p[a.notContain]))<_e&&(S[a.notContain]=n(S[a.notContain],_e-i)),g[a.notContain].push(S[a.notContain]),S[a.notContain]=n(S[a.notContain],_e,r(S[a.contain],S[a.notContain])?"x"===p[a.notContain]?f:d:h(S[a.notContain],S[a.contain],"x"===p[a.notContain]?"y":"x"))):(i=s(S[0],S[1],"x"===p[0]?"y":"x"),g.forEach(function(e,t){var a=0===t?1:0;e.push(S[t]),S[t]=n(S[t],_e,i>=2*_e?h(S[t],S[a],"x"===p[t]?"y":"x"):"x"===p[t]?f:d)}))}else{if(c[0]&&c[1])return r(S[1],S[0])?g[1].push(S[1]):r(S[0],S[1])?g[0].push(S[0]):g[0].push("x"===p[0]?{x:S[1].x,y:S[0].y}:{x:S[0].x,y:S[1].y}),!1;c[0]!==c[1]?(a=l(c),g[a.notContain].push(S[a.notContain]),S[a.notContain]=n(S[a.notContain],_e,s(S[a.notContain],S[a.contain],p[a.contain])>=_e?h(S[a.notContain],S[a.contain],p[a.contain]):S[a.contain].dirId)):(u=[{x:S[0].x,y:S[0].y},{x:S[1].x,y:S[1].y}],g.forEach(function(e,t){var a=0===t?1:0,i=s(u[t],u[a],p[t]);i<_e&&(S[t]=n(S[t],_e-i)),e.push(S[t]),S[t]=n(S[t],_e,h(S[t],S[a],p[a]))}))}return!0}(););g[1].reverse(),g[0].concat(g[1]).forEach(function(e,t){var n={x:e.x,y:e.y};t>0&&u.push([c,n]),c=n})}()}!function(){var e=[];f.position_plugOverheadSE.forEach(function(t,n){var a,i,r,d,f,m,g,S,v,_,x,b=!n;t>0?2===(a=u[i=b?0:u.length-1]).length?(e[i]=e[i]||l.apply(null,a),e[i]>ve&&(e[i]-t<ve&&(t=e[i]-ve),r=s(a[0],a[1],(b?t:e[i]-t)/e[i]),u[i]=b?[r,a[1]]:[a[0],r],e[i]-=t)):(e[i]=e[i]||c.apply(null,a),e[i]>ve&&(e[i]-t<ve&&(t=e[i]-ve),r=h(a[0],a[1],a[2],a[3],p(a[0],a[1],a[2],a[3],b?t:e[i]-t)),b?(d=a[0],f=r.toP1):(d=a[3],f=r.fromP2),m=Math.atan2(d.y-r.y,r.x-d.x),g=l(r,f),r.x=d.x+Math.cos(m)*t,r.y=d.y+Math.sin(m)*t*-1,f.x=r.x+Math.cos(m)*g,f.y=r.y+Math.sin(m)*g*-1,u[i]=b?[r,r.toP1,r.toP2,a[3]]:[a[0],r.fromP1,r.fromP2,r],e[i]=null)):t<0&&(a=u[i=b?0:u.length-1],S=y[n].socketId,v=S===Q||S===q?"x":"y",x=-o[n]["x"===v?"width":"height"],t<x&&(t=x),_=t*(S===Q||S===Z?-1:1),2===a.length?a[b?0:a.length-1][v]+=_:(b?[0,1]:[a.length-2,a.length-1]).forEach(function(e){a[e][v]+=_}),e[i]=null)})}(),m.position_socketXYSE=t(y),m.position_plugOverheadSE=t(f.position_plugOverheadSE),m.position_path=f.position_path,m.position_lineStrokeWidth=f.position_lineStrokeWidth,m.position_socketGravitySE=t(i),g=!0,e.events.apl_position&&e.events.apl_position.forEach(function(t){t(e,u)})}return g}function C(e,t){t!==e.isShown&&(!!t!=!!e.isShown&&(e.svg.style.visibility=t?"":"hidden"),e.isShown=t,e.events&&e.events.svgShow&&e.events.svgShow.forEach(function(n){n(e,t)}))}function I(a,i){var o={};i.line&&(o.line=function(e){var t=e.options,a=e.curStats,i=e.events,o=!1;return o=w(e,a,"line_color",t.lineColor,i.cur_line_color)||o,o=w(e,a,"line_colorTra",n(a.line_color)[0]<1)||o,o=w(e,a,"line_strokeWidth",t.lineSize,i.cur_line_strokeWidth)||o}(a)),(i.plug||o.line)&&(o.plug=function(e){var t=e.options,a=e.curStats,i=e.events,o=!1;return[0,1].forEach(function(r){var l,s,u,h,c,p,d,f,m=t.plugSE[r];o=w(e,a.plug_enabledSE,r,m!==ie)||o,o=w(e,a.plug_plugSE,r,m)||o,o=w(e,a.plug_colorSE,r,f=t.plugColorSE[r]||a.line_color,i.cur_plug_colorSE)||o,o=w(e,a.plug_colorTraSE,r,n(f)[0]<1)||o,m!==ie&&(l=le[ue[m]],h=s=l.widthR*t.plugSizeSE[r],c=u=l.heightR*t.plugSizeSE[r],Ie&&(h*=a.line_strokeWidth,c*=a.line_strokeWidth),o=w(e,a.plug_markerWidthSE,r,h)||o,o=w(e,a.plug_markerHeightSE,r,c)||o,a.capsMaskMarker_markerWidthSE[r]=s,a.capsMaskMarker_markerHeightSE[r]=u),a.plugOutline_plugSE[r]=a.capsMaskMarker_plugSE[r]=m,a.plug_enabledSE[r]?(f=a.line_strokeWidth/Ae.lineSize*t.plugSizeSE[r],a.position_plugOverheadSE[r]=l.overhead*f,a.viewBox_plugBCircleSE[r]=l.bCircle*f,p=l.sideLen*f,d=l.backLen*f):(a.position_plugOverheadSE[r]=-a.line_strokeWidth/2,a.viewBox_plugBCircleSE[r]=p=d=0),w(e,a.attach_plugSideLenSE,r,p,i.cur_attach_plugSideLenSE),w(e,a.attach_plugBackLenSE,r,d,i.cur_attach_plugBackLenSE),a.capsMaskAnchor_enabledSE[r]=!a.plug_enabledSE[r]}),o=w(e,a,"plug_enabled",a.plug_enabledSE[0]||a.plug_enabledSE[1])||o}(a)),(i.lineOutline||o.line)&&(o.lineOutline=function(e){var t,a=e.options,i=e.curStats,o=!1;return o=w(e,i,"lineOutline_enabled",a.lineOutlineEnabled)||o,o=w(e,i,"lineOutline_color",a.lineOutlineColor)||o,o=w(e,i,"lineOutline_colorTra",n(i.lineOutline_color)[0]<1)||o,t=i.line_strokeWidth*a.lineOutlineSize,o=w(e,i,"lineOutline_strokeWidth",i.line_strokeWidth-2*t)||o,o=w(e,i,"lineOutline_inStrokeWidth",i.lineOutline_colorTra?i.lineOutline_strokeWidth+2*Le:i.line_strokeWidth-t)||o}(a)),(i.plugOutline||o.line||o.plug||o.lineOutline)&&(o.plugOutline=function(e){var t=e.options,a=e.curStats,i=!1;return[0,1].forEach(function(o){var r,l=a.plugOutline_plugSE[o],s=l!==ie?le[ue[l]]:null;i=w(e,a.plugOutline_enabledSE,o,t.plugOutlineEnabledSE[o]&&a.plug_enabled&&a.plug_enabledSE[o]&&!!s&&!!s.outlineBase)||i,i=w(e,a.plugOutline_colorSE,o,r=t.plugOutlineColorSE[o]||a.lineOutline_color)||i,i=w(e,a.plugOutline_colorTraSE,o,n(r)[0]<1)||i,s&&s.outlineBase&&((r=t.plugOutlineSizeSE[o])>s.outlineMax&&(r=s.outlineMax),r*=2*s.outlineBase,i=w(e,a.plugOutline_strokeWidthSE,o,r)||i,i=w(e,a.plugOutline_inStrokeWidthSE,o,a.plugOutline_colorTraSE[o]?r-Le/(a.line_strokeWidth/Ae.lineSize)/t.plugSizeSE[o]*2:r/2)||i)}),i}(a)),(i.faces||o.line||o.plug||o.lineOutline||o.plugOutline)&&(o.faces=function(e){var t,n=e.curStats,a=e.aplStats,i=e.events,o=!1;return!n.line_altColor&&w(e,a,"line_color",t=n.line_color,i.apl_line_color)&&(e.lineFace.style.stroke=t,o=!0),w(e,a,"line_strokeWidth",t=n.line_strokeWidth,i.apl_line_strokeWidth)&&(e.lineShape.style.strokeWidth=t+"px",o=!0,(Me||ke)&&(v(e,e.lineShape),ke&&(v(e,e.lineFace),v(e,e.lineMaskCaps)))),w(e,a,"lineOutline_enabled",t=n.lineOutline_enabled,i.apl_lineOutline_enabled)&&(e.lineOutlineFace.style.display=t?"inline":"none",o=!0),n.lineOutline_enabled&&(w(e,a,"lineOutline_color",t=n.lineOutline_color,i.apl_lineOutline_color)&&(e.lineOutlineFace.style.stroke=t,o=!0),w(e,a,"lineOutline_strokeWidth",t=n.lineOutline_strokeWidth,i.apl_lineOutline_strokeWidth)&&(e.lineOutlineMaskShape.style.strokeWidth=t+"px",o=!0,ke&&(v(e,e.lineOutlineMaskCaps),v(e,e.lineOutlineFace))),w(e,a,"lineOutline_inStrokeWidth",t=n.lineOutline_inStrokeWidth,i.apl_lineOutline_inStrokeWidth)&&(e.lineMaskShape.style.strokeWidth=t+"px",o=!0,ke&&(v(e,e.lineOutlineMaskCaps),v(e,e.lineOutlineFace)))),w(e,a,"plug_enabled",t=n.plug_enabled,i.apl_plug_enabled)&&(e.plugsFace.style.display=t?"inline":"none",o=!0),n.plug_enabled&&[0,1].forEach(function(r){var l=n.plug_plugSE[r],s=l!==ie?le[ue[l]]:null,u=b(r,s);w(e,a.plug_enabledSE,r,t=n.plug_enabledSE[r],i.apl_plug_enabledSE)&&(e.plugsFace.style[u.prop]=t?"url(#"+e.plugMarkerIdSE[r]+")":"none",o=!0),n.plug_enabledSE[r]&&(w(e,a.plug_plugSE,r,l,i.apl_plug_plugSE)&&(e.plugFaceSE[r].href.baseVal="#"+s.elmId,x(e,e.plugMarkerSE[r],u.orient,s.bBox,e.svg,e.plugMarkerShapeSE[r],e.plugsFace),o=!0,Me&&v(e,e.plugsFace)),w(e,a.plug_colorSE,r,t=n.plug_colorSE[r],i.apl_plug_colorSE)&&(e.plugFaceSE[r].style.fill=t,o=!0,(Oe||Ie||ke)&&!n.line_colorTra&&v(e,ke?e.lineMaskCaps:e.capsMaskLine)),["markerWidth","markerHeight"].forEach(function(l){var s="plug_"+l+"SE";w(e,a[s],r,t=n[s][r],i["apl_"+s])&&(e.plugMarkerSE[r][l].baseVal.value=t,o=!0)}),w(e,a.plugOutline_enabledSE,r,t=n.plugOutline_enabledSE[r],i.apl_plugOutline_enabledSE)&&(t?(e.plugFaceSE[r].style.mask="url(#"+e.plugMaskIdSE[r]+")",e.plugOutlineFaceSE[r].style.display="inline"):(e.plugFaceSE[r].style.mask="none",e.plugOutlineFaceSE[r].style.display="none"),o=!0),n.plugOutline_enabledSE[r]&&(w(e,a.plugOutline_plugSE,r,l,i.apl_plugOutline_plugSE)&&(e.plugOutlineFaceSE[r].href.baseVal=e.plugMaskShapeSE[r].href.baseVal=e.plugOutlineMaskShapeSE[r].href.baseVal="#"+s.elmId,[e.plugMaskSE[r],e.plugOutlineMaskSE[r]].forEach(function(e){e.x.baseVal.value=s.bBox.left,e.y.baseVal.value=s.bBox.top,e.width.baseVal.value=s.bBox.width,e.height.baseVal.value=s.bBox.height}),o=!0),w(e,a.plugOutline_colorSE,r,t=n.plugOutline_colorSE[r],i.apl_plugOutline_colorSE)&&(e.plugOutlineFaceSE[r].style.fill=t,o=!0,ke&&(v(e,e.lineMaskCaps),v(e,e.lineOutlineMaskCaps))),w(e,a.plugOutline_strokeWidthSE,r,t=n.plugOutline_strokeWidthSE[r],i.apl_plugOutline_strokeWidthSE)&&(e.plugOutlineMaskShapeSE[r].style.strokeWidth=t+"px",o=!0),w(e,a.plugOutline_inStrokeWidthSE,r,t=n.plugOutline_inStrokeWidthSE[r],i.apl_plugOutline_inStrokeWidthSE)&&(e.plugMaskShapeSE[r].style.strokeWidth=t+"px",o=!0)))}),o}(a)),(i.position||o.line||o.plug)&&(o.position=M(a)),(i.path||o.position)&&(o.path=function(e){var t,n=e.curStats,a=e.aplStats,i=e.pathList.animVal||e.pathList.baseVal,o=n.path_edge,r=!1;return i&&(o.x1=o.x2=i[0][0].x,o.y1=o.y2=i[0][0].y,n.path_pathData=t=d(i,function(e){e.x<o.x1&&(o.x1=e.x),e.y<o.y1&&(o.y1=e.y),e.x>o.x2&&(o.x2=e.x),e.y>o.y2&&(o.y2=e.y)}),m(t,a.path_pathData)&&(e.linePath.setPathData(t),a.path_pathData=t,r=!0,ke?(v(e,e.plugsFace),v(e,e.lineMaskCaps)):Me&&v(e,e.linePath),e.events.apl_path&&e.events.apl_path.forEach(function(n){n(e,t)}))),r}(a)),o.viewBox=function(e){var t,n,a=e.curStats,i=e.aplStats,o=a.path_edge,r=a.viewBox_bBox,l=i.viewBox_bBox,s=e.svg.viewBox.baseVal,u=e.svg.style,h=!1;return t=Math.max(a.line_strokeWidth/2,a.viewBox_plugBCircleSE[0]||0,a.viewBox_plugBCircleSE[1]||0),n={x1:o.x1-t,y1:o.y1-t,x2:o.x2+t,y2:o.y2+t},e.events.new_edge4viewBox&&e.events.new_edge4viewBox.forEach(function(t){t(e,n)}),r.x=a.lineMask_x=a.lineOutlineMask_x=a.maskBGRect_x=n.x1,r.y=a.lineMask_y=a.lineOutlineMask_y=a.maskBGRect_y=n.y1,r.width=n.x2-n.x1,r.height=n.y2-n.y1,["x","y","width","height"].forEach(function(t){var n;(n=r[t])!==l[t]&&(s[t]=l[t]=n,u[pe[t]]=n+("x"===t||"y"===t?e.bodyOffset[t]:0)+"px",h=!0)}),h}(a),o.mask=function(e){var t,n=e.curStats,a=e.aplStats,i=!1;return n.plug_enabled?[0,1].forEach(function(e){n.capsMaskMarker_enabledSE[e]=n.plug_enabledSE[e]&&n.plug_colorTraSE[e]||n.plugOutline_enabledSE[e]&&n.plugOutline_colorTraSE[e]}):n.capsMaskMarker_enabledSE[0]=n.capsMaskMarker_enabledSE[1]=!1,n.capsMaskMarker_enabled=n.capsMaskMarker_enabledSE[0]||n.capsMaskMarker_enabledSE[1],n.lineMask_outlineMode=n.lineOutline_enabled,n.caps_enabled=n.capsMaskMarker_enabled||n.capsMaskAnchor_enabledSE[0]||n.capsMaskAnchor_enabledSE[1],n.lineMask_enabled=n.caps_enabled||n.lineMask_outlineMode,(n.lineMask_enabled&&!n.lineMask_outlineMode||n.lineOutline_enabled)&&["x","y"].forEach(function(o){var r="maskBGRect_"+o;w(e,a,r,t=n[r])&&(e.maskBGRect[o].baseVal.value=t,i=!0)}),w(e,a,"lineMask_enabled",t=n.lineMask_enabled)&&(e.lineFace.style.mask=t?"url(#"+e.lineMaskId+")":"none",i=!0,Ie&&v(e,e.lineMask)),n.lineMask_enabled&&(w(e,a,"lineMask_outlineMode",t=n.lineMask_outlineMode)&&(t?(e.lineMaskBG.style.display="none",e.lineMaskShape.style.display="inline"):(e.lineMaskBG.style.display="inline",e.lineMaskShape.style.display="none"),i=!0),["x","y"].forEach(function(o){var r="lineMask_"+o;w(e,a,r,t=n[r])&&(e.lineMask[o].baseVal.value=t,i=!0)}),w(e,a,"caps_enabled",t=n.caps_enabled)&&(e.lineMaskCaps.style.display=e.lineOutlineMaskCaps.style.display=t?"inline":"none",i=!0,Ie&&v(e,e.capsMaskLine)),n.caps_enabled&&([0,1].forEach(function(o){var r;w(e,a.capsMaskAnchor_enabledSE,o,t=n.capsMaskAnchor_enabledSE[o])&&(e.capsMaskAnchorSE[o].style.display=t?"inline":"none",i=!0,Ie&&v(e,e.lineMask)),n.capsMaskAnchor_enabledSE[o]&&(m(r=n.capsMaskAnchor_pathDataSE[o],a.capsMaskAnchor_pathDataSE[o])&&(e.capsMaskAnchorSE[o].setPathData(r),a.capsMaskAnchor_pathDataSE[o]=r,i=!0),w(e,a.capsMaskAnchor_strokeWidthSE,o,t=n.capsMaskAnchor_strokeWidthSE[o])&&(e.capsMaskAnchorSE[o].style.strokeWidth=t+"px",i=!0))}),w(e,a,"capsMaskMarker_enabled",t=n.capsMaskMarker_enabled)&&(e.capsMaskLine.style.display=t?"inline":"none",i=!0),n.capsMaskMarker_enabled&&[0,1].forEach(function(o){var r=n.capsMaskMarker_plugSE[o],l=r!==ie?le[ue[r]]:null,s=b(o,l);w(e,a.capsMaskMarker_enabledSE,o,t=n.capsMaskMarker_enabledSE[o])&&(e.capsMaskLine.style[s.prop]=t?"url(#"+e.lineMaskMarkerIdSE[o]+")":"none",i=!0),n.capsMaskMarker_enabledSE[o]&&(w(e,a.capsMaskMarker_plugSE,o,r)&&(e.capsMaskMarkerShapeSE[o].href.baseVal="#"+l.elmId,x(e,e.capsMaskMarkerSE[o],s.orient,l.bBox,e.svg,e.capsMaskMarkerShapeSE[o],e.capsMaskLine),i=!0,Me&&(v(e,e.capsMaskLine),v(e,e.lineFace))),["markerWidth","markerHeight"].forEach(function(r){var l="capsMaskMarker_"+r+"SE";w(e,a[l],o,t=n[l][o])&&(e.capsMaskMarkerSE[o][r].baseVal.value=t,i=!0)}))}))),n.lineOutline_enabled&&["x","y"].forEach(function(o){var r="lineOutlineMask_"+o;w(e,a,r,t=n[r])&&(e.lineOutlineMask[o].baseVal.value=t,i=!0)}),i}(a),i.effect&&function(n){var a,i=n.curStats,o=n.aplStats;Object.keys(B).forEach(function(r){var l=B[r],s=r+"_enabled",u=r+"_options",h=i[u];w(n,o,s,a=i[s])?(a&&(o[u]=t(h)),l[a?"init":"remove"](n)):a&&e(h,o[u])&&(l.remove(n),o[s]=!0,o[u]=t(h),l.init(n))})}(a),(Oe||Ie)&&o.line&&!o.path&&v(a,a.lineShape),Oe&&o.plug&&!o.line&&v(a,a.plugsFace),_(a)}function L(e,n){return{duration:Pe(e.duration)&&e.duration>0?e.duration:n.duration,timing:Ne.validTiming(e.timing)?e.timing:t(n.timing)}}function A(t,n,a,i){function o(){["show_on","show_effect","show_animOptions"].forEach(function(e){s[e]=l[e]})}var r,l=t.curStats,s=t.aplStats,u={};l.show_on=n,a&&W[a]&&(l.show_effect=a,l.show_animOptions=L(Ve(i)?i:{},W[a].defaultAnimOptions)),u.show_on=l.show_on!==s.show_on,u.show_effect=l.show_effect!==s.show_effect,u.show_animOptions=e(l.show_animOptions,s.show_animOptions),u.show_effect||u.show_animOptions?l.show_inAnim?(r=u.show_effect?W[s.show_effect].stop(t,!0,!0):W[s.show_effect].stop(t),o(),W[s.show_effect].init(t,r)):u.show_on&&(s.show_effect&&u.show_effect&&W[s.show_effect].stop(t,!0,!0),o(),W[s.show_effect].init(t)):u.show_on&&(o(),W[s.show_effect].start(t))}function V(e,t,n){var a={props:e,optionName:n};return!(!(e.attachments.indexOf(t)<0)||t.conf.bind&&!t.conf.bind(t,a)||(e.attachments.push(t),t.boundTargets.push(a),0))}function P(e,t,n){var a=e.attachments.indexOf(t);a>-1&&e.attachments.splice(a,1),t.boundTargets.some(function(n,i){return n.props===e&&(t.conf.unbind&&t.conf.unbind(t,n),a=i,!0)})&&(t.boundTargets.splice(a,1),n||S(function(){t.boundTargets.length||D(t)}))}function N(t,n){function i(e,t,n,a,i){var o={};return n?null!=a?(o.container=e[n],o.key=a):(o.container=e,o.key=n):(o.container=e,o.key=t),o.default=i,o.acceptsAuto=null==o.default,o}function r(e,t,n,a,o,r,l){var s,u,h,c=i(e,n,o,r,l);return null!=t[n]&&(u=(t[n]+"").toLowerCase())&&(c.acceptsAuto&&u===ce||(h=a[u]))&&h!==c.container[c.key]&&(c.container[c.key]=h,s=!0),null!=c.container[c.key]||c.acceptsAuto||(c.container[c.key]=c.default,s=!0),s}function l(e,t,n,a,o,r,l,s,u){var h,c,p=i(e,n,o,r,l);if(!a){if(null==p.default)throw new Error("Invalid `type`: "+n);a=typeof p.default}return null!=t[n]&&(p.acceptsAuto&&(t[n]+"").toLowerCase()===ce||function(e,t){return"number"===t?Pe(e):typeof e===t}(c=t[n],a)&&(c=u&&"string"===a&&c?c.trim():c,!0)&&(!s||s(c)))&&c!==p.container[p.key]&&(p.container[p.key]=c,h=!0),null!=p.container[p.key]||p.acceptsAuto||(p.container[p.key]=p.default,h=!0),h}var s,u,h=t.options,c={};if(n=n||{},["start","end"].forEach(function(e,i){var o=n[e],r=!1;if(o&&(a(o)||(r=G(o,"anchor")))&&o!==h.anchorSE[i]){if(!1!==t.optionIsAttach.anchorSE[i]&&P(t,je[h.anchorSE[i]._id]),r&&!V(t,je[o._id],e))throw new Error("Can't bind attachment");h.anchorSE[i]=o,t.optionIsAttach.anchorSE[i]=r,u=c.position=!0}}),!h.anchorSE[0]||!h.anchorSE[1]||h.anchorSE[0]===h.anchorSE[1])throw new Error("`start` and `end` are required.");u&&(s=function(e,t){var n,a,i;if(!(n=o(e))||!(a=o(t)))throw new Error("Cannot get frames.");return n.length&&a.length&&(n.reverse(),a.reverse(),n.some(function(e){return a.some(function(t){return t===e&&(i=t.contentWindow,!0)})})),i||window}(!1!==t.optionIsAttach.anchorSE[0]?je[h.anchorSE[0]._id].element:h.anchorSE[0],!1!==t.optionIsAttach.anchorSE[1]?je[h.anchorSE[1]._id].element:h.anchorSE[1]))!==t.baseWindow&&(function(e,t){function n(e){var t=r.appendChild(y.createElementNS(we,"mask"));return t.id=e,t.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[t.x,t.y,t.width,t.height].forEach(function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),t}function a(e){var t=r.appendChild(y.createElementNS(we,"marker"));return t.id=e,t.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,t.viewBox.baseVal||t.setAttribute("viewBox","0 0 0 0"),t}function i(e){return[e.width,e.height].forEach(function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)}),e}var o,r,l,s,u,h,c,p,d,f,m=e.aplStats,y=t.document,g=Y+"-"+e._id;e.pathList={},E(m,We),Object.keys(B).forEach(function(t){var n=t+"_enabled";m[n]&&(B[t].remove(e),m[n]=!1)}),e.baseWindow&&e.svg&&e.baseWindow.document.body.removeChild(e.svg),e.baseWindow=t,O(t),e.bodyOffset=k(t),e.svg=o=y.createElementNS(we,"svg"),o.className.baseVal=Y,o.viewBox.baseVal||o.setAttribute("viewBox","0 0 0 0"),e.defs=r=o.appendChild(y.createElementNS(we,"defs")),e.linePath=s=r.appendChild(y.createElementNS(we,"path")),s.id=u=g+"-line-path",s.className.baseVal=Y+"-line-path",Ie&&(s.style.fill="none"),e.lineShape=s=r.appendChild(y.createElementNS(we,"use")),s.id=h=g+"-line-shape",s.href.baseVal="#"+u,(l=r.appendChild(y.createElementNS(we,"g"))).id=c=g+"-caps",e.capsMaskAnchorSE=[0,1].map(function(){var e=l.appendChild(y.createElementNS(we,"path"));return e.className.baseVal=Y+"-caps-mask-anchor",e}),e.lineMaskMarkerIdSE=[g+"-caps-mask-marker-0",g+"-caps-mask-marker-1"],e.capsMaskMarkerSE=[0,1].map(function(t){return a(e.lineMaskMarkerIdSE[t])}),e.capsMaskMarkerShapeSE=[0,1].map(function(t){var n=e.capsMaskMarkerSE[t].appendChild(y.createElementNS(we,"use"));return n.className.baseVal=Y+"-caps-mask-marker-shape",n}),e.capsMaskLine=s=l.appendChild(y.createElementNS(we,"use")),s.className.baseVal=Y+"-caps-mask-line",s.href.baseVal="#"+h,e.maskBGRect=s=i(r.appendChild(y.createElementNS(we,"rect"))),s.id=p=g+"-mask-bg-rect",s.className.baseVal=Y+"-mask-bg-rect",Ie&&(s.style.fill="white"),e.lineMask=i(n(e.lineMaskId=g+"-line-mask")),e.lineMaskBG=s=e.lineMask.appendChild(y.createElementNS(we,"use")),s.href.baseVal="#"+p,e.lineMaskShape=s=e.lineMask.appendChild(y.createElementNS(we,"use")),s.className.baseVal=Y+"-line-mask-shape",s.href.baseVal="#"+u,s.style.display="none",e.lineMaskCaps=s=e.lineMask.appendChild(y.createElementNS(we,"use")),s.href.baseVal="#"+c,e.lineOutlineMask=i(n(d=g+"-line-outline-mask")),(s=e.lineOutlineMask.appendChild(y.createElementNS(we,"use"))).href.baseVal="#"+p,e.lineOutlineMaskShape=s=e.lineOutlineMask.appendChild(y.createElementNS(we,"use")),s.className.baseVal=Y+"-line-outline-mask-shape",s.href.baseVal="#"+u,e.lineOutlineMaskCaps=s=e.lineOutlineMask.appendChild(y.createElementNS(we,"use")),s.href.baseVal="#"+c,e.face=o.appendChild(y.createElementNS(we,"g")),e.lineFace=s=e.face.appendChild(y.createElementNS(we,"use")),s.href.baseVal="#"+h,e.lineOutlineFace=s=e.face.appendChild(y.createElementNS(we,"use")),s.href.baseVal="#"+h,s.style.mask="url(#"+d+")",s.style.display="none",e.plugMaskIdSE=[g+"-plug-mask-0",g+"-plug-mask-1"],e.plugMaskSE=[0,1].map(function(t){return n(e.plugMaskIdSE[t])}),e.plugMaskShapeSE=[0,1].map(function(t){var n=e.plugMaskSE[t].appendChild(y.createElementNS(we,"use"));return n.className.baseVal=Y+"-plug-mask-shape",n}),f=[],e.plugOutlineMaskSE=[0,1].map(function(e){return n(f[e]=g+"-plug-outline-mask-"+e)}),e.plugOutlineMaskShapeSE=[0,1].map(function(t){var n=e.plugOutlineMaskSE[t].appendChild(y.createElementNS(we,"use"));return n.className.baseVal=Y+"-plug-outline-mask-shape",n}),e.plugMarkerIdSE=[g+"-plug-marker-0",g+"-plug-marker-1"],e.plugMarkerSE=[0,1].map(function(t){var n=a(e.plugMarkerIdSE[t]);return Ie&&(n.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),n}),e.plugMarkerShapeSE=[0,1].map(function(t){return e.plugMarkerSE[t].appendChild(y.createElementNS(we,"g"))}),e.plugFaceSE=[0,1].map(function(t){return e.plugMarkerShapeSE[t].appendChild(y.createElementNS(we,"use"))}),e.plugOutlineFaceSE=[0,1].map(function(t){var n=e.plugMarkerShapeSE[t].appendChild(y.createElementNS(we,"use"));return n.style.mask="url(#"+f[t]+")",n.style.display="none",n}),e.plugsFace=s=e.face.appendChild(y.createElementNS(we,"use")),s.className.baseVal=Y+"-plugs-face",s.href.baseVal="#"+h,s.style.display="none",e.curStats.show_inAnim?(e.isShown=1,W[m.show_effect].stop(e,!0)):e.isShown||(o.style.visibility="hidden"),y.body.appendChild(o),[0,1,2].forEach(function(t){var n,a=e.options.labelSEM[t];a&&G(a,"label")&&(n=je[a._id]).conf.initSvg&&n.conf.initSvg(n,e)})}(t,s),c.line=c.plug=c.lineOutline=c.plugOutline=c.faces=c.effect=!0),c.position=r(h,n,"path",ae,null,null,Ae.path)||c.position,c.position=r(h,n,"startSocket",K,"socketSE",0)||c.position,c.position=r(h,n,"endSocket",K,"socketSE",1)||c.position,[n.startSocketGravity,n.endSocketGravity].forEach(function(e,t){var n=!1;null!=e&&(Array.isArray(e)?Pe(e[0])&&Pe(e[1])&&(n=[e[0],e[1]],Array.isArray(h.socketGravitySE[t])&&function(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}(n,h.socketGravitySE[t])&&(n=!1)):((e+"").toLowerCase()===ce?n=null:Pe(e)&&e>=0&&(n=e),n===h.socketGravitySE[t]&&(n=!1)),!1!==n&&(h.socketGravitySE[t]=n,c.position=!0))}),c.line=l(h,n,"color",null,"lineColor",null,Ae.lineColor,null,!0)||c.line,c.line=l(h,n,"size",null,"lineSize",null,Ae.lineSize,function(e){return e>0})||c.line,["startPlug","endPlug"].forEach(function(e,t){c.plug=r(h,n,e,se,"plugSE",t,Ae.plugSE[t])||c.plug,c.plug=l(h,n,e+"Color","string","plugColorSE",t,null,null,!0)||c.plug,c.plug=l(h,n,e+"Size",null,"plugSizeSE",t,Ae.plugSizeSE[t],function(e){return e>0})||c.plug}),c.lineOutline=l(h,n,"outline",null,"lineOutlineEnabled",null,Ae.lineOutlineEnabled)||c.lineOutline,c.lineOutline=l(h,n,"outlineColor",null,"lineOutlineColor",null,Ae.lineOutlineColor,null,!0)||c.lineOutline,c.lineOutline=l(h,n,"outlineSize",null,"lineOutlineSize",null,Ae.lineOutlineSize,function(e){return e>0&&e<=.48})||c.lineOutline,["startPlugOutline","endPlugOutline"].forEach(function(e,t){c.plugOutline=l(h,n,e,null,"plugOutlineEnabledSE",t,Ae.plugOutlineEnabledSE[t])||c.plugOutline,c.plugOutline=l(h,n,e+"Color","string","plugOutlineColorSE",t,null,null,!0)||c.plugOutline,c.plugOutline=l(h,n,e+"Size",null,"plugOutlineSizeSE",t,Ae.plugOutlineSizeSE[t],function(e){return e>=1})||c.plugOutline}),["startLabel","endLabel","middleLabel"].forEach(function(e,a){var i,o,r,l=n[e],s=h.labelSEM[a]&&!t.optionIsAttach.labelSEM[a]?je[h.labelSEM[a]._id].text:h.labelSEM[a],u=!1;if((i="string"==typeof l)&&(l=l.trim()),(i||l&&(u=G(l,"label")))&&l!==s){if(h.labelSEM[a]&&(P(t,je[h.labelSEM[a]._id]),h.labelSEM[a]=""),l){if(u?(r=l,(o=je[r._id]).boundTargets.slice().forEach(function(e){o.conf.removeOption(o,e)})):r=new F(R.captionLabel,[l]),!V(t,je[r._id],e))throw new Error("Can't bind attachment");h.labelSEM[a]=r}t.optionIsAttach.labelSEM[a]=u}}),Object.keys(B).forEach(function(a){function i(e){var t={};return p.optionsConf.forEach(function(n){var a=n[0],i=n[3];null==n[4]||t[i]||(t[i]=[]),("function"==typeof a?a:"id"===a?r:l).apply(null,[t,e].concat(n.slice(1)))}),t}function o(e){var n,i=a+"_animOptions";return e.hasOwnProperty("animation")?Ve(e.animation)?n=t.curStats[i]=L(e.animation,p.defaultAnimOptions):(n=!!e.animation,t.curStats[i]=n?L({},p.defaultAnimOptions):null):(n=!!p.defaultEnabled,t.curStats[i]=n?L({},p.defaultAnimOptions):null),n}var s,u,p=B[a],d=a+"_enabled",f=a+"_options";n.hasOwnProperty(a)&&(s=n[a],Ve(s)?(t.curStats[d]=!0,u=t.curStats[f]=i(s),p.anim&&(t.curStats[f].animation=o(s))):(u=t.curStats[d]=!!s)&&(t.curStats[f]=i({}),p.anim&&(t.curStats[f].animation=o({}))),e(u,h[a])&&(h[a]=u,c.effect=!0))}),I(t,c)}function T(e,n,a){var i={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};E(i.curStats,We),E(i.aplStats,We),Object.keys(B).forEach(function(e){var t=B[e].stats;E(i.curStats,t),E(i.aplStats,t),i.options[e]=!1}),E(i.curStats,Re),E(i.aplStats,Re),i.curStats.show_effect=Fe,i.curStats.show_animOptions=t(W[Fe].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++ze}),i._id=this._id,De[this._id]=i,1===arguments.length&&(a=e,e=null),a=a||{},(e||n)&&(a=t(a),e&&(a.start=e),n&&(a.end=n)),i.isShown=i.aplStats.show_on=!a.hide,this.setOptions(a)}var B,W,R,F,G,D,z,j,H,U,Y="leader-line",Z=1,q=2,X=3,Q=4,K={top:Z,right:q,bottom:X,left:Q},J=1,$=2,ee=3,te=4,ne=5,ae={straight:J,arc:$,fluid:ee,magnet:te,grid:ne},ie="behind",oe=Y+"-defs",re='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:#fff}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:#000}.leader-line-caps-mask-anchor{stroke:#000}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:transparent}.leader-line-line-mask-shape{stroke:#fff}.leader-line-line-outline-mask-shape{stroke:#000}.leader-line-plug-mask-shape{fill:#fff;stroke:#000}.leader-line-plug-outline-mask-shape{fill:#000;stroke:#fff}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',le={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},se={behind:ie,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},ue={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},he=[Z,q,X,Q],ce="auto",pe={x:"left",y:"top",width:"width",height:"height"},de=80,fe=4,me=5,ye=120,ge=8,Se=3.75,ve=10,_e=30,xe=.5522847,be=.25*Math.PI,Ee=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,we="http://www.w3.org/2000/svg",ke=!!document.uniqueID,Oe=!(!window.chrome||!window.chrome.webstore),Me="MozAppearance"in document.documentElement.style,Ce="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,Ie=!window.chrome&&"WebkitAppearance"in document.documentElement.style,Le=ke||Ce?.2:.1,Ae={path:ee,lineColor:"coral",lineSize:4,plugSE:[ie,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},Ve=function(){var e={}.toString,t={}.hasOwnProperty.toString,n=t.call(Object);return function(a){var i,o;return a&&"[object Object]"===e.call(a)&&(!(i=Object.getPrototypeOf(a))||(o=i.hasOwnProperty("constructor")&&i.constructor)&&"function"==typeof o&&t.call(o)===n)}}(),Pe=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},Ne=function(){function e(){var t=Date.now(),a=!1;n&&(r.call(window,n),n=null),s.forEach(function(e){var n,o,r;if(e.framesStart){if((n=t-e.framesStart)>=e.duration&&e.count&&e.loopsLeft<=1)return r=e.frames[e.lastFrame=e.reverse?0:e.frames.length-1],e.frameCallback(r.value,!0,r.timeRatio,r.outputRatio),void(e.framesStart=null);if(n>e.duration){if(o=Math.floor(n/e.duration),e.count){if(o>=e.loopsLeft)return r=e.frames[e.lastFrame=e.reverse?0:e.frames.length-1],e.frameCallback(r.value,!0,r.timeRatio,r.outputRatio),void(e.framesStart=null);e.loopsLeft-=o}e.framesStart+=e.duration*o,n=t-e.framesStart}e.reverse&&(n=e.duration-n),r=e.frames[e.lastFrame=Math.round(n/i)],!1!==e.frameCallback(r.value,!1,r.timeRatio,r.outputRatio)?a=!0:e.framesStart=null}}),a&&(n=o.call(window,e))}function t(t,n){t.framesStart=Date.now(),null!=n&&(t.framesStart-=t.duration*(t.reverse?1-n:n)),t.loopsLeft=t.count,t.lastFrame=null,e()}var n,a={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},i=1e3/60/2,o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,i)},r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},l=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},s=[],u=0;return{add:function(e,n,o,r,l,h,c){function p(t,n){return{value:e(n),timeRatio:t,outputRatio:n}}var d,f,m,y,g,S,v,_=++u;if("string"==typeof l&&(l=a[l]),e=e||function(){},o<i)f=[p(0,0),p(1,1)];else{if(m=i/o,f=[p(0,0)],0===l[0]&&0===l[1]&&1===l[2]&&1===l[3])for(g=m;g<=1;g+=m)f.push(p(g,g));else for(y=m/10,g=m,S=y;S<=1;S+=y)(v=function(e){var t=S*S,n=t*S,a=1-S,i=3*(a*a)*S,o=3*a*t;return{x:i*l[0]+o*l[2]+n,y:i*l[1]+o*l[3]+n}}()).x>=g&&(f.push(p(v.x,v.y)),g+=m);f.push(p(1,1))}return d={animId:_,frameCallback:n,duration:o,count:r,frames:f,reverse:!!h},s.push(d),!1!==c&&t(d,c),_},remove:function(e){var t;s.some(function(n,a){return n.animId===e&&(t=a,n.framesStart=null,!0)})&&s.splice(t,1)},start:function(e,n,a){s.some(function(i){return i.animId===e&&(i.reverse=!!n,t(i,a),!0)})},stop:function(e,t){var n;return s.some(function(a){return a.animId===e&&(t?null!=a.lastFrame&&(n=a.frames[a.lastFrame].timeRatio):(n=(Date.now()-a.framesStart)/a.duration,a.reverse&&(n=1-n),n<0?n=0:n>1&&(n=1)),a.framesStart=null,!0)}),n},validTiming:function(e){return"string"==typeof e?a[e]:Array.isArray(e)&&[0,1,2,3].every(function(t){return l(e[t])&&e[t]>=0&&e[t]<=1})?[e[0],e[1],e[2],e[3]]:null}}}(),Te=function(e){e.SVGPathElement.prototype.getPathData&&e.SVGPathElement.prototype.setPathData||function(){var t={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},n=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},a=-1!==e.navigator.userAgent.indexOf("MSIE ");n.prototype={parseSegment:function(){var e=this._string[this._currentIndex],n=t[e]?t[e]:null;if(null===n){if(null===this._prevCommand)return null;if(null===(n=("+"===e||"-"===e||"."===e||e>="0"&&e<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;this._prevCommand=n;var a=null,i=n.toUpperCase();return"H"===i||"V"===i?a=[this._parseNumber()]:"M"===i||"L"===i||"T"===i?a=[this._parseNumber(),this._parseNumber()]:"S"===i||"Q"===i?a=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===i?a=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===i?a=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===i&&(this._skipOptionalSpaces(),a=[]),null===a||a.indexOf(null)>=0?null:{type:n,values:a}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return t[e]?t[e]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,n=1,a=0,i=1,o=1,r=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,i=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&"."!==this._string[this._currentIndex])return null;for(var l=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==l)for(var s=this._currentIndex-1,u=1;s>=l;)t+=u*(this._string[s]-"0"),s-=1,u*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)n*=10,a+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==r&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var h=t+a;return h*=i,e&&(h*=Math.pow(10,o*e)),r===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),h)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}};var i=function(e){if(!e||0===e.length)return[];var t=new n(e),a=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var i=t.parseSegment();if(null===i)break;a.push(i)}return a},o=e.SVGPathElement.prototype.setAttribute,r=e.SVGPathElement.prototype.removeAttribute,l=e.Symbol?e.Symbol():"__cachedPathData",s=e.Symbol?e.Symbol():"__cachedNormalizedPathData",u=function(e,t,n,a,i,o,r,l,s,h){var c,p,d,f,m=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}},y=function(e){return Math.PI*e/180}(r),g=[];if(h)c=h[0],p=h[1],d=h[2],f=h[3];else{var S=m(e,t,-y);e=S.x,t=S.y;var v=m(n,a,-y),_=(e-(n=v.x))/2,x=(t-(a=v.y))/2,b=_*_/(i*i)+x*x/(o*o);b>1&&(b=Math.sqrt(b),i*=b,o*=b);var E=i*i,w=o*o,k=E*w-E*x*x-w*_*_,O=E*x*x+w*_*_,M=(l===s?-1:1)*Math.sqrt(Math.abs(k/O));d=M*i*x/o+(e+n)/2,f=M*-o*_/i+(t+a)/2,c=Math.asin(parseFloat(((t-f)/o).toFixed(9))),p=Math.asin(parseFloat(((a-f)/o).toFixed(9))),e<d&&(c=Math.PI-c),n<d&&(p=Math.PI-p),c<0&&(c=2*Math.PI+c),p<0&&(p=2*Math.PI+p),s&&c>p&&(c-=2*Math.PI),!s&&p>c&&(p-=2*Math.PI)}var C=p-c;if(Math.abs(C)>120*Math.PI/180){var I=p,L=n,A=a;p=s&&p>c?c+120*Math.PI/180*1:c+120*Math.PI/180*-1,n=d+i*Math.cos(p),a=f+o*Math.sin(p),g=u(n,a,L,A,i,o,r,0,s,[p,I,d,f])}C=p-c;var V=Math.cos(c),P=Math.sin(c),N=Math.cos(p),T=Math.sin(p),B=Math.tan(C/4),W=4/3*i*B,R=4/3*o*B,F=[e,t],G=[e+W*P,t-R*V],D=[n+W*T,a-R*N],z=[n,a];if(G[0]=2*F[0]-G[0],G[1]=2*F[1]-G[1],h)return[G,D,z].concat(g);var j=[],H=[];return(g=[G,D,z].concat(g).join().split(",")).forEach(function(e,t){t%2?H.push(m(g[t-1],g[t],y).y):H.push(m(g[t],g[t+1],y).x),6===H.length&&(j.push(H),H=[])}),j},h=function(e){return e.map(function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}})},c=function(e){var t=[],n=null,a=null,i=null,o=null,r=null,l=null,s=null;return e.forEach(function(e){if("M"===e.type){var h=e.values[0],c=e.values[1];t.push({type:"M",values:[h,c]}),l=h,s=c,o=h,r=c}else if("C"===e.type){var p=e.values[0],d=e.values[1],f=e.values[2],m=e.values[3];h=e.values[4],c=e.values[5];t.push({type:"C",values:[p,d,f,m,h,c]}),a=f,i=m,o=h,r=c}else if("L"===e.type){h=e.values[0],c=e.values[1];t.push({type:"L",values:[h,c]}),o=h,r=c}else if("H"===e.type){h=e.values[0];t.push({type:"L",values:[h,r]}),o=h}else if("V"===e.type){c=e.values[0];t.push({type:"L",values:[o,c]}),r=c}else if("S"===e.type){f=e.values[0],m=e.values[1],h=e.values[2],c=e.values[3];"C"===n||"S"===n?(y=o+(o-a),g=r+(r-i)):(y=o,g=r),t.push({type:"C",values:[y,g,f,m,h,c]}),a=f,i=m,o=h,r=c}else if("T"===e.type){h=e.values[0],c=e.values[1];"Q"===n||"T"===n?(p=o+(o-a),d=r+(r-i)):(p=o,d=r);var y=o+2*(p-o)/3,g=r+2*(d-r)/3,S=h+2*(p-h)/3,v=c+2*(d-c)/3;t.push({type:"C",values:[y,g,S,v,h,c]}),a=p,i=d,o=h,r=c}else if("Q"===e.type){p=e.values[0],d=e.values[1],h=e.values[2],c=e.values[3],y=o+2*(p-o)/3,g=r+2*(d-r)/3,S=h+2*(p-h)/3,v=c+2*(d-c)/3;t.push({type:"C",values:[y,g,S,v,h,c]}),a=p,i=d,o=h,r=c}else if("A"===e.type){var _=e.values[0],x=e.values[1],b=e.values[2],E=e.values[3],w=e.values[4];h=e.values[5],c=e.values[6];if(0===_||0===x)t.push({type:"C",values:[o,r,h,c,h,c]}),o=h,r=c;else if(o!==h||r!==c){u(o,r,h,c,_,x,b,E,w).forEach(function(e){t.push({type:"C",values:e}),o=h,r=c})}}else"Z"===e.type&&(t.push(e),o=l,r=s);n=e.type}),t};e.SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[l]=null,this[s]=null),o.call(this,e,t)},e.SVGPathElement.prototype.removeAttribute=function(e,t){"d"===e&&(this[l]=null,this[s]=null),r.call(this,e)},e.SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize){if(this[s])return h(this[s]);this[l]?n=h(this[l]):(n=i(this.getAttribute("d")||""),this[l]=h(n));var t=c(function(e){var t=[],n=null,a=null,i=null,o=null;return e.forEach(function(e){var r=e.type;if("M"===r){var l=e.values[0],s=e.values[1];t.push({type:"M",values:[l,s]}),i=l,o=s,n=l,a=s}else if("m"===r)l=n+e.values[0],s=a+e.values[1],t.push({type:"M",values:[l,s]}),i=l,o=s,n=l,a=s;else if("L"===r)l=e.values[0],s=e.values[1],t.push({type:"L",values:[l,s]}),n=l,a=s;else if("l"===r)l=n+e.values[0],s=a+e.values[1],t.push({type:"L",values:[l,s]}),n=l,a=s;else if("C"===r){var u=e.values[0],h=e.values[1],c=e.values[2],p=e.values[3];l=e.values[4],s=e.values[5],t.push({type:"C",values:[u,h,c,p,l,s]}),n=l,a=s}else"c"===r?(u=n+e.values[0],h=a+e.values[1],c=n+e.values[2],p=a+e.values[3],l=n+e.values[4],s=a+e.values[5],t.push({type:"C",values:[u,h,c,p,l,s]}),n=l,a=s):"Q"===r?(u=e.values[0],h=e.values[1],l=e.values[2],s=e.values[3],t.push({type:"Q",values:[u,h,l,s]}),n=l,a=s):"q"===r?(u=n+e.values[0],h=a+e.values[1],l=n+e.values[2],s=a+e.values[3],t.push({type:"Q",values:[u,h,l,s]}),n=l,a=s):"A"===r?(l=e.values[5],s=e.values[6],t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],l,s]}),n=l,a=s):"a"===r?(l=n+e.values[5],s=a+e.values[6],t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],l,s]}),n=l,a=s):"H"===r?(l=e.values[0],t.push({type:"H",values:[l]}),n=l):"h"===r?(l=n+e.values[0],t.push({type:"H",values:[l]}),n=l):"V"===r?(s=e.values[0],t.push({type:"V",values:[s]}),a=s):"v"===r?(s=a+e.values[0],t.push({type:"V",values:[s]}),a=s):"S"===r?(c=e.values[0],p=e.values[1],l=e.values[2],s=e.values[3],t.push({type:"S",values:[c,p,l,s]}),n=l,a=s):"s"===r?(c=n+e.values[0],p=a+e.values[1],l=n+e.values[2],s=a+e.values[3],t.push({type:"S",values:[c,p,l,s]}),n=l,a=s):"T"===r?(l=e.values[0],s=e.values[1],t.push({type:"T",values:[l,s]}),n=l,a=s):"t"===r?(l=n+e.values[0],s=a+e.values[1],t.push({type:"T",values:[l,s]}),n=l,a=s):"Z"!==r&&"z"!==r||(t.push({type:"Z",values:[]}),n=i,a=o)}),t}(n));return this[s]=h(t),t}if(this[l])return h(this[l]);var n=i(this.getAttribute("d")||"");return this[l]=h(n),n},e.SVGPathElement.prototype.setPathData=function(e){if(0===e.length)a?this.setAttribute("d",""):this.removeAttribute("d");else{for(var t="",n=0,i=e.length;n<i;n+=1){var o=e[n];n>0&&(t+=" "),t+=o.type,o.values&&o.values.length>0&&(t+=" "+o.values.join(" "))}this.setAttribute("d",t)}},e.SVGRectElement.prototype.getPathData=function(e){var t=this.x.baseVal.value,n=this.y.baseVal.value,a=this.width.baseVal.value,i=this.height.baseVal.value,o=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,r=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;o>a/2&&(o=a/2),r>i/2&&(r=i/2);var l=[{type:"M",values:[t+o,n]},{type:"H",values:[t+a-o]},{type:"A",values:[o,r,0,0,1,t+a,n+r]},{type:"V",values:[n+i-r]},{type:"A",values:[o,r,0,0,1,t+a-o,n+i]},{type:"H",values:[t+o]},{type:"A",values:[o,r,0,0,1,t,n+i-r]},{type:"V",values:[n+r]},{type:"A",values:[o,r,0,0,1,t+o,n]},{type:"Z",values:[]}];return l=l.filter(function(e){return"A"!==e.type||0!==e.values[0]&&0!==e.values[1]}),e&&!0===e.normalize&&(l=c(l)),l},e.SVGCircleElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.r.baseVal.value,i=[{type:"M",values:[t+a,n]},{type:"A",values:[a,a,0,0,1,t,n+a]},{type:"A",values:[a,a,0,0,1,t-a,n]},{type:"A",values:[a,a,0,0,1,t,n-a]},{type:"A",values:[a,a,0,0,1,t+a,n]},{type:"Z",values:[]}];return e&&!0===e.normalize&&(i=c(i)),i},e.SVGEllipseElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.rx.baseVal.value,i=this.ry.baseVal.value,o=[{type:"M",values:[t+a,n]},{type:"A",values:[a,i,0,0,1,t,n+i]},{type:"A",values:[a,i,0,0,1,t-a,n]},{type:"A",values:[a,i,0,0,1,t,n-i]},{type:"A",values:[a,i,0,0,1,t+a,n]},{type:"Z",values:[]}];return e&&!0===e.normalize&&(o=c(o)),o},e.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},e.SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e},e.SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e.push({type:"Z",values:[]}),e}}()},Be=function(){function e(){var t,s;n&&(o.call(window,n),n=null),r.forEach(function(e){e.event&&(e.listener(e.event),e.event=null,t=!0)}),t?(l=Date.now(),s=!0):Date.now()-l<a&&(s=!0),s&&(n=i.call(window,e))}function t(e){var t=-1;return r.some(function(n,a){return n.listener===e&&(t=a,!0)}),t}var n,a=500,i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},r=[],l=Date.now();return{add:function(a){var i;return-1===t(a)?(r.push(i={listener:a}),function(t){i.event=t,n||e()}):null},remove:function(e){var a;(a=t(e))>-1&&(r.splice(a,1),!r.length&&n&&(o.call(window,n),n=null))}}}(),We={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:ie},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:ie},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:ie},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},Re={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},Fe="fade",Ge=[],De={},ze=0,je={},He=0;return B={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(e){return e>0}],["type","gap","number",null,null,null,function(e){return e>0}]],init:function(e){y(e,"apl_line_strokeWidth",B.dash.update),e.lineFace.style.strokeDashoffset=0,B.dash.update(e)},remove:function(e){var t=e.curStats;g(e,"apl_line_strokeWidth",B.dash.update),t.dash_animId&&(Ne.remove(t.dash_animId),t.dash_animId=null),e.lineFace.style.strokeDasharray="none",e.lineFace.style.strokeDashoffset=0,E(e.aplStats,B.dash.stats)},update:function(n){var a,i=n.curStats,o=n.aplStats,r=o.dash_options,l=!1;i.dash_len=r.len||2*o.line_strokeWidth,i.dash_gap=r.gap||o.line_strokeWidth,i.dash_maxOffset=i.dash_len+i.dash_gap,l=w(n,o,"dash_len",i.dash_len)||l,(l=w(n,o,"dash_gap",i.dash_gap)||l)&&(n.lineFace.style.strokeDasharray=o.dash_len+","+o.dash_gap),i.dash_animOptions?(l=w(n,o,"dash_maxOffset",i.dash_maxOffset),o.dash_animOptions&&(l||e(i.dash_animOptions,o.dash_animOptions))&&(i.dash_animId&&(a=Ne.stop(i.dash_animId),Ne.remove(i.dash_animId)),o.dash_animOptions=null),o.dash_animOptions||(i.dash_animId=Ne.add(function(e){return(1-e)*o.dash_maxOffset+"px"},function(e){n.lineFace.style.strokeDashoffset=e},i.dash_animOptions.duration,0,i.dash_animOptions.timing,!1,a),o.dash_animOptions=t(i.dash_animOptions))):o.dash_animOptions&&(i.dash_animId&&(Ne.remove(i.dash_animId),i.dash_animId=null),n.lineFace.style.strokeDashoffset=0,o.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(e){var t,n=e.baseWindow.document,a=e.defs,i=Y+"-"+e._id+"-gradient";e.efc_gradient_gradient=t=a.appendChild(n.createElementNS(we,"linearGradient")),t.id=i,t.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[t.x1,t.y1,t.x2,t.y2].forEach(function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),e.efc_gradient_stopSE=[0,1].map(function(t){var a=e.efc_gradient_gradient.appendChild(n.createElementNS(we,"stop"));try{a.offset.baseVal=t}catch(e){if(e.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw e;a.setAttribute("offset",t)}return a}),y(e,"cur_plug_colorSE",B.gradient.update),y(e,"apl_path",B.gradient.update),e.curStats.line_altColor=!0,e.lineFace.style.stroke="url(#"+i+")",B.gradient.update(e)},remove:function(e){e.efc_gradient_gradient&&(e.defs.removeChild(e.efc_gradient_gradient),e.efc_gradient_gradient=e.efc_gradient_stopSE=null),g(e,"cur_plug_colorSE",B.gradient.update),g(e,"apl_path",B.gradient.update),e.curStats.line_altColor=!1,e.lineFace.style.stroke=e.curStats.line_color,E(e.aplStats,B.gradient.stats)},update:function(e){var t,a,i=e.curStats,o=e.aplStats,r=o.gradient_options,l=e.pathList.animVal||e.pathList.baseVal;[0,1].forEach(function(e){i.gradient_colorSE[e]=r.colorSE[e]||i.plug_colorSE[e]}),a=l[0][0],i.gradient_pointSE[0]={x:a.x,y:a.y},a=(t=l[l.length-1])[t.length-1],i.gradient_pointSE[1]={x:a.x,y:a.y},[0,1].forEach(function(t){var a;w(e,o.gradient_colorSE,t,a=i.gradient_colorSE[t])&&(Ie?(a=n(a),e.efc_gradient_stopSE[t].style.stopColor=a[1],e.efc_gradient_stopSE[t].style.stopOpacity=a[0]):e.efc_gradient_stopSE[t].style.stopColor=a),["x","y"].forEach(function(n){(a=i.gradient_pointSE[t][n])!==o.gradient_pointSE[t][n]&&(e.efc_gradient_gradient[n+(t+1)].baseVal.value=o.gradient_pointSE[t][n]=a)})})}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(e){return e>=0}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(e){return e>=0&&e<=1}]],init:function(e){var t=e.baseWindow.document,n=e.defs,a=Y+"-"+e._id+"-dropShadow",i=function(e,t){var n,a,i={};return"boolean"!=typeof U&&(U=!!window.SVGFEDropShadowElement&&!Ie),i.elmsAppend=[i.elmFilter=n=e.createElementNS(we,"filter")],n.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,n.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),n.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),n.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),n.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),n.id=t,U?(i.elmOffset=i.elmBlur=a=n.appendChild(e.createElementNS(we,"feDropShadow")),i.styleFlood=a.style):(i.elmBlur=n.appendChild(e.createElementNS(we,"feGaussianBlur")),i.elmOffset=a=n.appendChild(e.createElementNS(we,"feOffset")),a.result.baseVal="offsetblur",a=n.appendChild(e.createElementNS(we,"feFlood")),i.styleFlood=a.style,a=n.appendChild(e.createElementNS(we,"feComposite")),a.in2.baseVal="offsetblur",a.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(a=n.appendChild(e.createElementNS(we,"feMerge"))).appendChild(e.createElementNS(we,"feMergeNode")),a.appendChild(e.createElementNS(we,"feMergeNode")).in1.baseVal="SourceGraphic"),i}(t,a);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach(function(t){e["efc_dropShadow_"+t]=i[t]}),i.elmsAppend.forEach(function(e){n.appendChild(e)}),e.face.setAttribute("filter","url(#"+a+")"),y(e,"new_edge4viewBox",B.dropShadow.adjustEdge),B.dropShadow.update(e)},remove:function(e){var t=e.defs;e.efc_dropShadow_elmsAppend&&(e.efc_dropShadow_elmsAppend.forEach(function(e){t.removeChild(e)}),e.efc_dropShadow_elmFilter=e.efc_dropShadow_elmOffset=e.efc_dropShadow_elmBlur=e.efc_dropShadow_styleFlood=e.efc_dropShadow_elmsAppend=null),g(e,"new_edge4viewBox",B.dropShadow.adjustEdge),I(e,{}),e.face.removeAttribute("filter"),E(e.aplStats,B.dropShadow.stats)},update:function(e){var t,n,a=e.curStats,i=e.aplStats,o=i.dropShadow_options;a.dropShadow_dx=t=o.dx,w(e,i,"dropShadow_dx",t)&&(e.efc_dropShadow_elmOffset.dx.baseVal=t,n=!0),a.dropShadow_dy=t=o.dy,w(e,i,"dropShadow_dy",t)&&(e.efc_dropShadow_elmOffset.dy.baseVal=t,n=!0),a.dropShadow_blur=t=o.blur,w(e,i,"dropShadow_blur",t)&&(e.efc_dropShadow_elmBlur.setStdDeviation(t,t),n=!0),n&&I(e,{}),a.dropShadow_color=t=o.color,w(e,i,"dropShadow_color",t)&&(e.efc_dropShadow_styleFlood.floodColor=t),a.dropShadow_opacity=t=o.opacity,w(e,i,"dropShadow_opacity",t)&&(e.efc_dropShadow_styleFlood.floodOpacity=t)},adjustEdge:function(e,t){var n,a,i=e.curStats,o=e.aplStats;null!=i.dropShadow_dx&&(n=3*i.dropShadow_blur,(a={x1:t.x1-n+i.dropShadow_dx,y1:t.y1-n+i.dropShadow_dy,x2:t.x2+n+i.dropShadow_dx,y2:t.y2+n+i.dropShadow_dy}).x1<t.x1&&(t.x1=a.x1),a.y1<t.y1&&(t.y1=a.y1),a.x2>t.x2&&(t.x2=a.x2),a.y2>t.y2&&(t.y2=a.y2),["x","y"].forEach(function(n){var a,r="dropShadow_"+n;i[r]=a=t[n+"1"],w(e,o,r,a)&&(e.efc_dropShadow_elmFilter[n].baseVal.value=a)}))}}},Object.keys(B).forEach(function(e){var t=B[e],n=t.stats;n[e+"_enabled"]={iniValue:!1},n[e+"_options"]={hasProps:!0},t.anim&&(n[e+"_animOptions"]={},n[e+"_animId"]={})}),W={none:{defaultAnimOptions:{},init:function(e,t){var n=e.curStats;n.show_animId&&(Ne.remove(n.show_animId),n.show_animId=null),W.none.start(e,t)},start:function(e,t){W.none.stop(e,!0)},stop:function(e,t,n){var a=e.curStats;return n=null!=n?n:e.aplStats.show_on,a.show_inAnim=!1,t&&C(e,n),n?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(e,t){var n=e.curStats,a=e.aplStats;n.show_animId&&Ne.remove(n.show_animId),n.show_animId=Ne.add(function(e){return e},function(t,n){n?W.fade.stop(e,!0):(e.svg.style.opacity=t+"",ke&&(v(e,e.svg),_(e)))},a.show_animOptions.duration,1,a.show_animOptions.timing,null,!1),W.fade.start(e,t)},start:function(e,t){var n,a=e.curStats;a.show_inAnim&&(n=Ne.stop(a.show_animId)),C(e,1),a.show_inAnim=!0,Ne.start(a.show_animId,!e.aplStats.show_on,null!=t?t:n)},stop:function(e,t,n){var a,i=e.curStats;return n=null!=n?n:e.aplStats.show_on,a=i.show_inAnim?Ne.stop(i.show_animId):n?1:0,i.show_inAnim=!1,t&&(e.svg.style.opacity=n?"":"0",C(e,n)),a}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(e,t){var n=e.curStats,a=e.aplStats,i=e.pathList.baseVal,o=f(i),r=o.segsLen,l=o.lenAll;n.show_animId&&Ne.remove(n.show_animId),n.show_animId=Ne.add(function(e){var t,n,a,o,u=-1;if(0===e)n=[[i[0][0],i[0][0]]];else if(1===e)n=i;else{for(t=l*e,n=[];t>=r[++u];)n.push(i[u]),t-=r[u];t&&(2===(a=i[u]).length?n.push([a[0],s(a[0],a[1],t/r[u])]):(o=h(a[0],a[1],a[2],a[3],p(a[0],a[1],a[2],a[3],t)),n.push([a[0],o.fromP1,o.fromP2,o])))}return n},function(t,n){n?W.draw.stop(e,!0):(e.pathList.animVal=t,I(e,{path:!0}))},a.show_animOptions.duration,1,a.show_animOptions.timing,null,!1),W.draw.start(e,t)},start:function(e,t){var n,a=e.curStats;a.show_inAnim&&(n=Ne.stop(a.show_animId)),C(e,1),a.show_inAnim=!0,y(e,"apl_position",W.draw.update),Ne.start(a.show_animId,!e.aplStats.show_on,null!=t?t:n)},stop:function(e,t,n){var a,i=e.curStats;return n=null!=n?n:e.aplStats.show_on,a=i.show_inAnim?Ne.stop(i.show_animId):n?1:0,i.show_inAnim=!1,t&&(n?(e.pathList.animVal=null,I(e,{path:!0})):(e.pathList.animVal=[[e.pathList.baseVal[0][0],e.pathList.baseVal[0][0]]],I(e,{path:!0})),C(e,n)),a},update:function(e){g(e,"apl_position",W.draw.update),e.curStats.show_inAnim?W.draw.init(e,W.draw.stop(e)):e.aplStats.show_animOptions={}}}},function(){function e(e){return function(t){var n={};n[e]=t,this.setOptions(n)}}[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach(function(n){var a=n[0],i=n[1],o=n[2];Object.defineProperty(T.prototype,a,{get:function(){var e=null!=o?De[this._id].options[i][o]:i?De[this._id].options[i]:De[this._id].options[a];return null==e?ce:t(e)},set:e(a),enumerable:!0})}),[["path",ae],["startSocket",K,"socketSE",0],["endSocket",K,"socketSE",1],["startPlug",se,"plugSE",0],["endPlug",se,"plugSE",1]].forEach(function(t){var n=t[0],a=t[1],i=t[2],o=t[3];Object.defineProperty(T.prototype,n,{get:function(){var e,t=null!=o?De[this._id].options[i][o]:i?De[this._id].options[i]:De[this._id].options[n];return t?Object.keys(a).some(function(n){return a[n]===t&&(e=n,!0)})?e:new Error("It's broken"):ce},set:e(n),enumerable:!0})}),Object.keys(B).forEach(function(n){var a=B[n];Object.defineProperty(T.prototype,n,{get:function(){var e=De[this._id].options[n];return Ve(e)?function(e){var n=a.optionsConf.reduce(function(n,a){var i,o=a[0],r=a[1],l=a[2],s=a[3],u=a[4],h=null!=u?e[s][u]:s?e[s]:e[r];return n[r]="id"===o?h?Object.keys(l).some(function(e){return l[e]===h&&(i=e,!0)})?i:new Error("It's broken"):ce:null==h?ce:t(h),n},{});return a.anim&&(n.animation=t(e.animation)),n}(e):e},set:e(n),enumerable:!0})}),["startLabel","endLabel","middleLabel"].forEach(function(t,n){Object.defineProperty(T.prototype,t,{get:function(){var e=De[this._id],t=e.options;return t.labelSEM[n]&&!e.optionIsAttach.labelSEM[n]?je[t.labelSEM[n]._id].text:t.labelSEM[n]||""},set:e(t),enumerable:!0})})}(),T.prototype.setOptions=function(e){return N(De[this._id],e),this},T.prototype.position=function(){return I(De[this._id],{position:!0}),this},T.prototype.remove=function(){var e=De[this._id],t=e.curStats;Object.keys(B).forEach(function(e){var n=e+"_animId";t[n]&&Ne.remove(t[n])}),t.show_animId&&Ne.remove(t.show_animId),e.attachments.slice().forEach(function(t){P(e,t)}),e.baseWindow&&e.svg&&e.baseWindow.document.body.removeChild(e.svg),delete De[this._id]},T.prototype.show=function(e,t){return A(De[this._id],!0,e,t),this},T.prototype.hide=function(e,t){return A(De[this._id],!1,e,t),this},D=function(e){e&&je[e._id]&&(e.boundTargets.slice().forEach(function(t){P(t.props,e,!0)}),e.conf.remove&&e.conf.remove(e),delete je[e._id])},F=function(){function e(e,n){var a,i={conf:e,curStats:{},aplStats:{},boundTargets:[]},o={};e.argOptions.every(function(e){return!(!n.length||("string"==typeof e.type?typeof n[0]!==e.type:"function"!=typeof e.type||!e.type(n[0]))||(o[e.optionName]=n.shift(),0))}),a=n.length&&Ve(n[0])?t(n[0]):{},Object.keys(o).forEach(function(e){a[e]=o[e]}),e.stats&&(E(i.curStats,e.stats),E(i.aplStats,e.stats)),Object.defineProperty(this,"_id",{value:++He}),Object.defineProperty(this,"isRemoved",{get:function(){return!je[this._id]}}),i._id=this._id,e.init&&!e.init(i,a)||(je[this._id]=i)}return e.prototype.remove=function(){var e=this,t=je[e._id];t&&(t.boundTargets.slice().forEach(function(e){t.conf.removeOption(t,e)}),S(function(){var t=je[e._id];t&&(console.error("LeaderLineAttachment was not removed by removeOption"),D(t))}))},e}(),window.LeaderLineAttachment=F,G=function(e,t){return e instanceof F&&(!(e.isRemoved||t&&je[e._id].conf.type!==t)||null)},R={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:a}],init:function(e,t){return e.element=R.pointAnchor.checkElement(t.element),e.x=R.pointAnchor.parsePercent(t.x,!0)||[.5,!0],e.y=R.pointAnchor.parsePercent(t.y,!0)||[.5,!0],!0},removeOption:function(e,t){var n=t.props,a={},i=e.element,o=n.options.anchorSE["start"===t.optionName?1:0];i===o&&(i=o===document.body?new F(R.pointAnchor,[i]):document.body),a[t.optionName]=i,N(n,a)},getBBoxNest:function(e,t){var n=r(e.element,t.baseWindow),a=n.width,i=n.height;return n.width=n.height=0,n.left=n.right=n.left+e.x[0]*(e.x[1]?a:1),n.top=n.bottom=n.top+e.y[0]*(e.y[1]?i:1),n},parsePercent:function(e,t){var n,a,i=!1;return Pe(e)?a=e:"string"==typeof e&&(n=Ee.exec(e))&&n[2]&&(a=parseFloat(n[1])/100,i=0!==a),null!=a&&(t||a>=0)?[a,i]:null},checkElement:function(e){if(null==e)e=document.body;else if(!a(e))throw new Error("`element` must be Element");return e}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:a},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(e,t){var n,a,i,o=[];return e.element=R.pointAnchor.checkElement(t.element),"string"==typeof t.color&&(e.color=t.color.trim()),"string"==typeof t.fillColor&&(e.fill=t.fillColor.trim()),Pe(t.size)&&t.size>=0&&(e.size=t.size),t.dash&&(e.dash=!0,Pe(t.dash.len)&&t.dash.len>0&&(e.dashLen=t.dash.len),Pe(t.dash.gap)&&t.dash.gap>0&&(e.dashGap=t.dash.gap)),"circle"===t.shape?e.shape=t.shape:"polygon"===t.shape&&Array.isArray(t.points)&&t.points.length>=3&&t.points.every(function(t){var n={};return!(!(n.x=R.pointAnchor.parsePercent(t[0],!0))||!(n.y=R.pointAnchor.parsePercent(t[1],!0))||(o.push(n),(n.x[1]||n.y[1])&&(e.hasRatio=!0),0))})?(e.shape=t.shape,e.points=o):(e.shape="rect",e.radius=Pe(t.radius)&&t.radius>=0?t.radius:0),"rect"!==e.shape&&"circle"!==e.shape||(e.x=R.pointAnchor.parsePercent(t.x,!0)||[-.05,!0],e.y=R.pointAnchor.parsePercent(t.y,!0)||[-.05,!0],e.width=R.pointAnchor.parsePercent(t.width)||[1.1,!0],e.height=R.pointAnchor.parsePercent(t.height)||[1.1,!0],(e.x[1]||e.y[1]||e.width[1]||e.height[1])&&(e.hasRatio=!0)),n=e.element.ownerDocument,e.svg=a=n.createElementNS(we,"svg"),a.className.baseVal=Y+"-areaAnchor",a.viewBox.baseVal||a.setAttribute("viewBox","0 0 0 0"),e.path=a.appendChild(n.createElementNS(we,"path")),e.path.style.fill=e.fill||"none",e.isShown=!1,a.style.visibility="hidden",n.body.appendChild(a),O(i=n.defaultView),e.bodyOffset=k(i),e.updateColor=function(){var t,n=e.curStats,a=e.aplStats,i=e.boundTargets.length?e.boundTargets[0].props.curStats:null;n.color=t=e.color||(i?i.line_color:Ae.lineColor),w(e,a,"color",t)&&(e.path.style.stroke=t)},e.updateShow=function(){C(e,e.boundTargets.some(function(e){return!0===e.props.isShown}))},!0},bind:function(e,t){var n=t.props;return e.color||y(n,"cur_line_color",e.updateColor),y(n,"svgShow",e.updateShow),S(function(){e.updateColor(),e.updateShow()}),!0},unbind:function(e,t){var n=t.props;e.color||g(n,"cur_line_color",e.updateColor),g(n,"svgShow",e.updateShow),e.boundTargets.length>1&&S(function(){e.updateColor(),e.updateShow(),R.areaAnchor.update(e)&&e.boundTargets.forEach(function(e){I(e.props,{position:!0})})})},removeOption:function(e,t){R.pointAnchor.removeOption(e,t)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach(function(t){R.areaAnchor.unbind(e,t)})),e.svg.parentNode.removeChild(e.svg)},getStrokeWidth:function(e,t){return R.areaAnchor.update(e)&&e.boundTargets.length>1&&S(function(){e.boundTargets.forEach(function(e){e.props!==t&&I(e.props,{position:!0})})}),e.curStats.strokeWidth},getPathData:function(e,t){var n=r(e.element,t.baseWindow);return d(e.curStats.pathListRel,function(e){e.x+=n.left,e.y+=n.top})},getBBoxNest:function(e,t){var n=r(e.element,t.baseWindow),a=e.curStats.bBoxRel;return{left:a.left+n.left,top:a.top+n.top,right:a.right+n.left,bottom:a.bottom+n.top,width:a.width,height:a.height}},update:function(e){var t,n,a=e.curStats,o=e.aplStats,r=e.boundTargets.length?e.boundTargets[0].props.curStats:null,l={};if(l.strokeWidth=w(e,a,"strokeWidth",null!=e.size?e.size:r?r.line_strokeWidth:Ae.lineSize),t=i(e.element),l.elementWidth=w(e,a,"elementWidth",t.width),l.elementHeight=w(e,a,"elementHeight",t.height),l.elementLeft=w(e,a,"elementLeft",t.left),l.elementTop=w(e,a,"elementTop",t.top),l.strokeWidth||e.hasRatio&&(l.elementWidth||l.elementHeight)){switch(e.shape){case"rect":!function(){var n,i,o,r,l,s,u,h,c;(n={left:e.x[0]*(e.x[1]?t.width:1),top:e.y[0]*(e.y[1]?t.height:1),width:e.width[0]*(e.width[1]?t.width:1),height:e.height[0]*(e.height[1]?t.height:1)}).right=n.left+n.width,n.bottom=n.top+n.height,l=a.strokeWidth/2,o=(r=Math.min(n.width,n.height))?r/2*Math.SQRT2+l:0,(i=e.radius?e.radius<=o?e.radius:o:0)?(s=(i-l)/Math.SQRT2,u=i-s,c=i*xe,h=[{x:n.left-u,y:n.top+s},{x:n.left+s,y:n.top-u},{x:n.right-s,y:n.top-u},{x:n.right+u,y:n.top+s},{x:n.right+u,y:n.bottom-s},{x:n.right-s,y:n.bottom+u},{x:n.left+s,y:n.bottom+u},{x:n.left-u,y:n.bottom-s}],a.pathListRel=[[h[0],{x:h[0].x,y:h[0].y-c},{x:h[1].x-c,y:h[1].y},h[1]]],h[1].x!==h[2].x&&a.pathListRel.push([h[1],h[2]]),a.pathListRel.push([h[2],{x:h[2].x+c,y:h[2].y},{x:h[3].x,y:h[3].y-c},h[3]]),h[3].y!==h[4].y&&a.pathListRel.push([h[3],h[4]]),a.pathListRel.push([h[4],{x:h[4].x,y:h[4].y+c},{x:h[5].x+c,y:h[5].y},h[5]]),h[5].x!==h[6].x&&a.pathListRel.push([h[5],h[6]]),a.pathListRel.push([h[6],{x:h[6].x-c,y:h[6].y},{x:h[7].x,y:h[7].y+c},h[7]]),h[7].y!==h[0].y&&a.pathListRel.push([h[7],h[0]]),a.pathListRel.push([]),u=i-s+a.strokeWidth/2,h=[{x:n.left-u,y:n.top-u},{x:n.right+u,y:n.bottom+u}],a.bBoxRel={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[1].y,width:h[1].x-h[0].x,height:h[1].y-h[0].y}):(u=a.strokeWidth/2,h=[{x:n.left-u,y:n.top-u},{x:n.right+u,y:n.bottom+u}],a.pathListRel=[[h[0],{x:h[1].x,y:h[0].y}],[{x:h[1].x,y:h[0].y},h[1]],[h[1],{x:h[0].x,y:h[1].y}],[]],h=[{x:n.left-a.strokeWidth,y:n.top-a.strokeWidth},{x:n.right+a.strokeWidth,y:n.bottom+a.strokeWidth}],a.bBoxRel={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[1].y,width:h[1].x-h[0].x,height:h[1].y-h[0].y})}();break;case"circle":!function(){var n,i,o,r,l,s,u,h,c,p,d,f,m;(n={left:e.x[0]*(e.x[1]?t.width:1),top:e.y[0]*(e.y[1]?t.height:1),width:e.width[0]*(e.width[1]?t.width:1),height:e.height[0]*(e.height[1]?t.height:1)}).width||n.height||(n.width=n.height=10),n.width||(n.width=n.height),n.height||(n.height=n.width),n.right=n.left+n.width,n.bottom=n.top+n.height,i=n.left+n.width/2,o=n.top+n.height/2,h=a.strokeWidth/2,c=n.width/2,p=n.height/2,r=c*Math.SQRT2+h,l=p*Math.SQRT2+h,s=r*xe,u=l*xe,m=[{x:i-r,y:o},{x:i,y:o-l},{x:i+r,y:o},{x:i,y:o+l}],a.pathListRel=[[m[0],{x:m[0].x,y:m[0].y-u},{x:m[1].x-s,y:m[1].y},m[1]],[m[1],{x:m[1].x+s,y:m[1].y},{x:m[2].x,y:m[2].y-u},m[2]],[m[2],{x:m[2].x,y:m[2].y+u},{x:m[3].x+s,y:m[3].y},m[3]],[m[3],{x:m[3].x-s,y:m[3].y},{x:m[0].x,y:m[0].y+u},m[0]],[]],d=r-c+a.strokeWidth/2,f=l-p+a.strokeWidth/2,m=[{x:n.left-d,y:n.top-f},{x:n.right+d,y:n.bottom+f}],a.bBoxRel={left:m[0].x,top:m[0].y,right:m[1].x,bottom:m[1].y,width:m[1].x-m[0].x,height:m[1].y-m[0].y}}();break;case"polygon":!function(){var n,i,o,r;e.points.forEach(function(e){var o=e.x[0]*(e.x[1]?t.width:1),r=e.y[0]*(e.y[1]?t.height:1);n?(o<n.left&&(n.left=o),o>n.right&&(n.right=o),r<n.top&&(n.top=r),r>n.bottom&&(n.bottom=r)):n={left:o,right:o,top:r,bottom:r},i?a.pathListRel.push([i,{x:o,y:r}]):a.pathListRel=[],i={x:o,y:r}}),a.pathListRel.push([]),o=a.strokeWidth/2,r=[{x:n.left-o,y:n.top-o},{x:n.right+o,y:n.bottom+o}],a.bBoxRel={left:r[0].x,top:r[0].y,right:r[1].x,bottom:r[1].y,width:r[1].x-r[0].x,height:r[1].y-r[0].y}}()}l.pathListRel=l.bBoxRel=!0}return(l.pathListRel||l.elementLeft||l.elementTop)&&(a.pathData=d(a.pathListRel,function(e){e.x+=t.left,e.y+=t.top})),w(e,o,"strokeWidth",n=a.strokeWidth)&&(e.path.style.strokeWidth=n+"px"),m(n=a.pathData,o.pathData)&&(e.path.setPathData(n),o.pathData=n,l.pathData=!0),e.dash&&(!l.pathData&&(!l.strokeWidth||e.dashLen&&e.dashGap)||(a.dashLen=e.dashLen||2*a.strokeWidth,a.dashGap=e.dashGap||a.strokeWidth),l.dash=w(e,o,"dashLen",a.dashLen)||l.dash,l.dash=w(e,o,"dashGap",a.dashGap)||l.dash,l.dash&&(e.path.style.strokeDasharray=o.dashLen+","+o.dashGap)),function(){var i=a.viewBoxBBox,r=o.viewBoxBBox,l=e.svg.viewBox.baseVal,s=e.svg.style;i.x=a.bBoxRel.left+t.left,i.y=a.bBoxRel.top+t.top,i.width=a.bBoxRel.width,i.height=a.bBoxRel.height,["x","y","width","height"].forEach(function(t){(n=i[t])!==r[t]&&(l[t]=r[t]=n,s[pe[t]]=n+("x"===t||"y"===t?e.bodyOffset[t]:0)+"px")})}(),l.strokeWidth||l.pathListRel||l.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:a},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(e,t){var n,a,i,o,r,l,s,u=R.mouseHoverAnchor,h={};if(e.element=R.pointAnchor.checkElement(t.element),!function(e){var t,n;return!!((n=e.ownerDocument)&&(t=n.defaultView)&&t.HTMLElement&&e instanceof t.HTMLElement)}(e.element))throw new Error("`element` must be HTML element");return u.style.backgroundSize=u.backgroundSize.width+"px "+u.backgroundSize.height+"px",["style","hoverStyle"].forEach(function(t){var n=u[t];e[t]=Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},{})}),"inline"===(n=e.element.ownerDocument.defaultView.getComputedStyle(e.element,"")).display?e.style.display="inline-block":"none"===n.display&&(e.style.display="block"),R.mouseHoverAnchor.dirKeys.forEach(function(t){var a=t[0],i="padding"+t[1];parseFloat(n[i])<u.padding[a]&&(e.style[i]=u.padding[a]+"px")}),e.style.display&&(o=e.element.style.display,e.element.style.display=e.style.display),R.mouseHoverAnchor.dirKeys.forEach(function(t){var n="padding"+t[1];e.style[n]&&(h[n]=e.element.style[n],e.element.style[n]=e.style[n])}),(i=e.element.getBoundingClientRect()).height<u.minHeight&&(ke?function(){var t=u.minHeight;"content-box"===n.boxSizing?t-=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)+parseFloat(n.paddingTop)+parseFloat(n.paddingBottom):"padding-box"===n.boxSizing&&(t-=parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)),e.style.height=t+"px"}():e.style.height=parseFloat(n.height)+(u.minHeight-i.height)+"px"),e.style.backgroundPosition=Ie?i.width-u.backgroundSize.width-u.backgroundPosition.right+"px "+u.backgroundPosition.top+"px":"right "+u.backgroundPosition.right+"px top "+u.backgroundPosition.top+"px",e.style.display&&(e.element.style.display=o),R.mouseHoverAnchor.dirKeys.forEach(function(t){var n="padding"+t[1];e.style[n]&&(e.element.style[n]=h[n])}),["style","hoverStyle"].forEach(function(n){var a=e[n],i=t[n];Ve(i)&&Object.keys(i).forEach(function(e){"string"==typeof i[e]||Pe(i[e])?a[e]=i[e]:null==i[e]&&delete a[e]})}),"function"==typeof t.onSwitch&&(s=t.onSwitch),t.showEffectName&&W[t.showEffectName]&&(e.showEffectName=r=t.showEffectName),l=t.animOptions,e.elmStyle=a=e.element.style,e.mouseenter=function(t){e.hoverStyleSave=u.getStyles(a,Object.keys(e.hoverStyle)),u.setStyles(a,e.hoverStyle),e.boundTargets.forEach(function(e){A(e.props,!0,r,l)}),s&&s(t)},e.mouseleave=function(t){u.setStyles(a,e.hoverStyleSave),e.boundTargets.forEach(function(e){A(e.props,!1,r,l)}),s&&s(t)},!0},bind:function(e,t){return t.props.svg?R.mouseHoverAnchor.llShow(t.props,!1,e.showEffectName):S(function(){R.mouseHoverAnchor.llShow(t.props,!1,e.showEffectName)}),e.enabled||(e.styleSave=R.mouseHoverAnchor.getStyles(e.elmStyle,Object.keys(e.style)),R.mouseHoverAnchor.setStyles(e.elmStyle,e.style),e.removeEventListener=function(e,t,n){var a,i;return"onmouseenter"in e&&"onmouseleave"in e?(e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",n,!1),function(){e.removeEventListener("mouseenter",t,!1),e.removeEventListener("mouseleave",n,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),a=function(e){e.relatedTarget&&(e.relatedTarget===this||this.compareDocumentPosition(e.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||t.apply(this,arguments)},e.addEventListener("mouseover",a),i=function(e){e.relatedTarget&&(e.relatedTarget===this||this.compareDocumentPosition(e.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||n.apply(this,arguments)},e.addEventListener("mouseout",i),function(){e.removeEventListener("mouseover",a,!1),e.removeEventListener("mouseout",i,!1)})}(e.element,e.mouseenter,e.mouseleave),e.enabled=!0),!0},unbind:function(e,t){e.enabled&&e.boundTargets.length<=1&&(e.removeEventListener(),R.mouseHoverAnchor.setStyles(e.elmStyle,e.styleSave),e.enabled=!1),R.mouseHoverAnchor.llShow(t.props,!0,e.showEffectName)},removeOption:function(e,t){R.pointAnchor.removeOption(e,t)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach(function(t){R.mouseHoverAnchor.unbind(e,t)}))},getBBoxNest:function(e,t){return r(e.element,t.baseWindow)},llShow:function(e,t,n){W[n||e.curStats.show_effect].stop(e,!0,t),e.aplStats.show_on=t},getStyles:function(e,t){return t.reduce(function(t,n){return t[n]=e[n],t},{})},setStyles:function(e,t){Object.keys(t).forEach(function(n){e[n]=t[n]})}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(e,t){return"string"==typeof t.text&&(e.text=t.text.trim()),!!e.text&&("string"==typeof t.color&&(e.color=t.color.trim()),e.outlineColor="string"==typeof t.outlineColor?t.outlineColor.trim():"#fff",Array.isArray(t.offset)&&Pe(t.offset[0])&&Pe(t.offset[1])&&(e.offset={x:t.offset[0],y:t.offset[1]}),Pe(t.lineOffset)&&(e.lineOffset=t.lineOffset),R.captionLabel.textStyleProps.forEach(function(n){null!=t[n]&&(e[n]=t[n])}),e.updateColor=function(t){R.captionLabel.updateColor(e,t)},e.updateSocketXY=function(t){var n,a,i,o,r=e.curStats,l=e.aplStats,s=t.curStats,u=s.position_socketXYSE[e.socketIndex];null!=u.x&&(e.offset?(r.x=u.x+e.offset.x,r.y=u.y+e.offset.y):(n=e.height/2,a=Math.max(s.attach_plugSideLenSE[e.socketIndex]||0,s.line_strokeWidth/2),i=s.position_socketXYSE[e.socketIndex?0:1],u.socketId===Q||u.socketId===q?(r.x=u.socketId===Q?u.x-n-e.width:u.x+n,r.y=i.y<u.y?u.y+a+n:u.y-a-n-e.height):(r.x=i.x<u.x?u.x+a+n:u.x-a-n-e.width,r.y=u.socketId===Z?u.y-n-e.height:u.y+n)),w(e,l,"x",o=r.x)&&(e.elmPosition.x.baseVal.getItem(0).value=o),w(e,l,"y",o=r.y)&&(e.elmPosition.y.baseVal.getItem(0).value=o+e.height))},e.updatePath=function(t){var n,a,i=e.curStats,o=e.aplStats,r=t.pathList.animVal||t.pathList.baseVal;r&&(n=R.captionLabel.getMidPoint(r,e.lineOffset),i.x=n.x-e.width/2,i.y=n.y-e.height/2,w(e,o,"x",a=i.x)&&(e.elmPosition.x.baseVal.getItem(0).value=a),w(e,o,"y",a=i.y)&&(e.elmPosition.y.baseVal.getItem(0).value=a+e.height))},e.updateShow=function(t){R.captionLabel.updateShow(e,t)},Ie&&(e.adjustEdge=function(t,n){var a=e.curStats;null!=a.x&&R.captionLabel.adjustEdge(n,{x:a.x,y:a.y,width:e.width,height:e.height},e.strokeWidth/2)}),!0)},updateColor:function(e,t){var n,a=e.curStats,i=e.aplStats,o=t.curStats;a.color=n=e.color||o.line_color,w(e,i,"color",n)&&(e.styleFill.fill=n)},updateShow:function(e,t){var n=!0===t.isShown;n!==e.isShown&&(e.styleShow.visibility=n?"":"hidden",e.isShown=n)},adjustEdge:function(e,t,n){var a={x1:t.x-n,y1:t.y-n,x2:t.x+t.width+n,y2:t.y+t.height+n};a.x1<e.x1&&(e.x1=a.x1),a.y1<e.y1&&(e.y1=a.y1),a.x2>e.x2&&(e.x2=a.x2),a.y2>e.y2&&(e.y2=a.y2)},newText:function(e,t,n,a,i){var o,r,l,s,u,h;return o=t.createElementNS(we,"text"),o.textContent=e,[o.x,o.y].forEach(function(e){var t=n.createSVGLength();t.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),e.baseVal.initialize(t)}),"boolean"!=typeof H&&(H="paintOrder"in o.style),i&&!H?(l=t.createElementNS(we,"defs"),o.id=a,l.appendChild(o),r=t.createElementNS(we,"g"),u=r.appendChild(t.createElementNS(we,"use")),u.href.baseVal="#"+a,s=r.appendChild(t.createElementNS(we,"use")),s.href.baseVal="#"+a,h=u.style,h.strokeLinejoin="round",{elmPosition:o,styleText:o.style,styleFill:s.style,styleStroke:h,styleShow:r.style,elmsAppend:[l,r]}):(h=o.style,i&&(h.strokeLinejoin="round",h.paintOrder="stroke"),{elmPosition:o,styleText:h,styleFill:h,styleStroke:i?h:null,styleShow:h,elmsAppend:[o]})},getMidPoint:function(e,t){var n,a,i,o=f(e),r=o.segsLen,l=o.lenAll,u=-1;if((n=l/2+(t||0))<=0)return 2===(a=e[0]).length?s(a[0],a[1],0):h(a[0],a[1],a[2],a[3],0);if(n>=l)return 2===(a=e[e.length-1]).length?s(a[0],a[1],1):h(a[0],a[1],a[2],a[3],1);for(i=[];n>r[++u];)i.push(e[u]),n-=r[u];return 2===(a=e[u]).length?s(a[0],a[1],n/r[u]):h(a[0],a[1],a[2],a[3],p(a[0],a[1],a[2],a[3],n))},initSvg:function(e,t){var n,a,i=R.captionLabel.newText(e.text,t.baseWindow.document,t.svg,Y+"-captionLabel-"+e._id,e.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach(function(t){e[t]=i[t]}),e.isShown=!1,e.styleShow.visibility="hidden",R.captionLabel.textStyleProps.forEach(function(t){null!=e[t]&&(i.styleText[t]=e[t])}),i.elmsAppend.forEach(function(e){t.svg.appendChild(e)}),n=i.elmPosition.getBBox(),e.width=n.width,e.height=n.height,e.outlineColor&&(a=n.height/9,a=a>10?10:a<2?2:a,i.styleStroke.strokeWidth=a+"px",i.styleStroke.stroke=e.outlineColor),e.strokeWidth=a||0,E(e.aplStats,R.captionLabel.stats),e.updateColor(t),e.refSocketXY?e.updateSocketXY(t):e.updatePath(t),Ie&&I(t,{}),e.updateShow(t)},bind:function(e,t){var n=t.props;return e.color||y(n,"cur_line_color",e.updateColor),(e.refSocketXY="startLabel"===t.optionName||"endLabel"===t.optionName)?(e.socketIndex="startLabel"===t.optionName?0:1,y(n,"apl_position",e.updateSocketXY),e.offset||(y(n,"cur_attach_plugSideLenSE",e.updateSocketXY),y(n,"cur_line_strokeWidth",e.updateSocketXY))):y(n,"apl_path",e.updatePath),y(n,"svgShow",e.updateShow),Ie&&y(n,"new_edge4viewBox",e.adjustEdge),R.captionLabel.initSvg(e,n),!0},unbind:function(e,t){var n=t.props;e.elmsAppend&&(e.elmsAppend.forEach(function(e){n.svg.removeChild(e)}),e.elmPosition=e.styleFill=e.styleShow=e.elmsAppend=null),E(e.curStats,R.captionLabel.stats),E(e.aplStats,R.captionLabel.stats),e.color||g(n,"cur_line_color",e.updateColor),e.refSocketXY?(g(n,"apl_position",e.updateSocketXY),e.offset||(g(n,"cur_attach_plugSideLenSE",e.updateSocketXY),g(n,"cur_line_strokeWidth",e.updateSocketXY))):g(n,"apl_path",e.updatePath),g(n,"svgShow",e.updateShow),Ie&&(g(n,"new_edge4viewBox",e.adjustEdge),I(n,{}))},removeOption:function(e,t){var n=t.props,a={};a[t.optionName]="",N(n,a)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach(function(t){R.captionLabel.unbind(e,t)}))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(e,t){return"string"==typeof t.text&&(e.text=t.text.trim()),!!e.text&&("string"==typeof t.color&&(e.color=t.color.trim()),e.outlineColor="string"==typeof t.outlineColor?t.outlineColor.trim():"#fff",Pe(t.lineOffset)&&(e.lineOffset=t.lineOffset),R.captionLabel.textStyleProps.forEach(function(n){null!=t[n]&&(e[n]=t[n])}),e.updateColor=function(t){R.captionLabel.updateColor(e,t)},e.updatePath=function(t){var n,a=e.curStats,i=e.aplStats,o=t.curStats,r=t.pathList.animVal||t.pathList.baseVal;r&&(a.pathData=n=R.pathLabel.getOffsetPathData(r,o.line_strokeWidth/2+e.strokeWidth/2+e.height/4,1.25*e.height),m(n,i.pathData)&&(e.elmPath.setPathData(n),i.pathData=n,e.bBox=e.elmPosition.getBBox(),e.updateStartOffset(t)))},e.updateStartOffset=function(t){var n,a,i,o=e.curStats,r=e.aplStats,s=t.curStats;o.pathData&&(2!==e.semIndex||e.lineOffset)&&(n=function(e){var t;return e.reduce(function(e,n){var a,i=n.values;switch(n.type){case"M":t={x:i[0],y:i[1]};break;case"L":a={x:i[0],y:i[1]},t&&(e+=l(t,a)),t=a;break;case"C":a={x:i[4],y:i[5]},t&&(e+=c(t,{x:i[0],y:i[1]},{x:i[2],y:i[3]},a)),t=a}return e},0)}(o.pathData),i=0===e.semIndex?0:1===e.semIndex?n:n/2,2!==e.semIndex&&(a=Math.max(s.attach_plugBackLenSE[e.semIndex]||0,s.line_strokeWidth/2)+e.strokeWidth/2+e.height/4,i+=0===e.semIndex?a:-a,i=i<0?0:i>n?n:i),e.lineOffset&&(i+=e.lineOffset,i=i<0?0:i>n?n:i),o.startOffset=i,w(e,r,"startOffset",i)&&(e.elmOffset.startOffset.baseVal.value=i))},e.updateShow=function(t){R.captionLabel.updateShow(e,t)},Ie&&(e.adjustEdge=function(t,n){e.bBox&&R.captionLabel.adjustEdge(n,e.bBox,e.strokeWidth/2)}),!0)},getOffsetPathData:function(e,t,n){function a(e,t){return Math.abs(e.x-t.x)<r&&Math.abs(e.y-t.y)<r}var i,o,r=3,s=[];return e.forEach(function(e){var n,o,r,p,d,f,m;2===e.length?(n=function(e,t,n){var a=Math.atan2(e.y-t.y,t.x-e.x)+.5*Math.PI;return[{x:e.x+Math.cos(a)*n,y:e.y+Math.sin(a)*n*-1},{x:t.x+Math.cos(a)*n,y:t.y+Math.sin(a)*n*-1}]}(e[0],e[1],t),i?(r=i.points,(p=Math.atan2(r[1].y-r[0].y,r[0].x-r[1].x)-Math.atan2(e[0].y-e[1].y,e[1].x-e[0].x))>=0&&p<=Math.PI?o={type:"line",points:n,inside:!0}:(f=u(r[0],r[1],t),d=u(n[1],n[0],t),(m=function(e,t,n,a){var i=t.x-e.x,o=t.y-e.y,r=a.x-n.x,l=a.y-n.y,s=(-o*(e.x-n.x)+i*(e.y-n.y))/(-r*o+i*l),u=(r*(e.y-n.y)-l*(e.x-n.x))/(-r*o+i*l);return s>=0&&s<=1&&u>=0&&u<=1?{x:e.x+u*i,y:e.y+u*o}:null}(r[0],f,d,n[1]))?(r[1]=m,o={type:"line",points:[m,n[1]]}):(r[1]=a(d,f)?d:f,o={type:"line",points:[d,n[1]]}),i.len=l(r[0],r[1]))):o={type:"line",points:n},o.len=l(o.points[0],o.points[1]),s.push(i=o)):(s.push({type:"cubic",points:function(e,t,n,a,i,o){for(var r,l,s=c(e,t,n,a)/o,u=1/(i>o?s*(i/o):s),p=[],d=0;r=h(e,t,n,a,d),l=(90-r.angle)*(Math.PI/180),p.push({x:r.x+Math.cos(l)*i,y:r.y+Math.sin(l)*i*-1}),!(d>=1);)(d+=u)>1&&(d=1);return p}(e[0],e[1],e[2],e[3],t,16)}),i=null)}),i=null,s.forEach(function(e){var a;"line"===e.type?(e.inside&&(i.len>t?(a=i.points,a[1]=u(a[0],a[1],-t),i.len=l(a[0],a[1])):(i.points=null,i.len=0),e.len>t+n?(a=e.points,a[0]=u(a[1],a[0],-(t+n)),e.len=l(a[0],a[1])):(e.points=null,e.len=0)),i=e):i=null}),s.reduce(function(e,t){var n=t.points;return n&&(o&&a(n[0],o)||e.push({type:"M",values:[n[0].x,n[0].y]}),"line"===t.type?e.push({type:"L",values:[n[1].x,n[1].y]}):(n.shift(),n.forEach(function(t){e.push({type:"L",values:[t.x,t.y]})})),o=n[n.length-1]),e},[])},newText:function(e,t,n,a){var i,o,r,l,s,u,h,c,p,d;return r=t.createElementNS(we,"defs"),l=r.appendChild(t.createElementNS(we,"path")),l.id=i=n+"-path",s=t.createElementNS(we,"text"),u=s.appendChild(t.createElementNS(we,"textPath")),u.href.baseVal="#"+i,u.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),u.textContent=e,"boolean"!=typeof H&&(H="paintOrder"in s.style),a&&!H?(s.id=o=n+"-text",r.appendChild(s),h=t.createElementNS(we,"g"),p=h.appendChild(t.createElementNS(we,"use")),p.href.baseVal="#"+o,c=h.appendChild(t.createElementNS(we,"use")),c.href.baseVal="#"+o,d=p.style,d.strokeLinejoin="round",{elmPosition:s,elmPath:l,elmOffset:u,styleText:s.style,styleFill:c.style,styleStroke:d,styleShow:h.style,elmsAppend:[r,h]}):(d=s.style,a&&(d.strokeLinejoin="round",d.paintOrder="stroke"),{elmPosition:s,elmPath:l,elmOffset:u,styleText:d,styleFill:d,styleStroke:a?d:null,styleShow:d,elmsAppend:[r,s]})},initSvg:function(e,t){var n,a,i=R.pathLabel.newText(e.text,t.baseWindow.document,Y+"-pathLabel-"+e._id,e.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach(function(t){e[t]=i[t]}),e.isShown=!1,e.styleShow.visibility="hidden",R.captionLabel.textStyleProps.forEach(function(t){null!=e[t]&&(i.styleText[t]=e[t])}),i.elmsAppend.forEach(function(e){t.svg.appendChild(e)}),i.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),n=i.elmPosition.getBBox(),i.styleText.textAnchor=["start","end","middle"][e.semIndex],2!==e.semIndex||e.lineOffset||i.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),e.height=n.height,e.outlineColor&&(a=n.height/9,a=a>10?10:a<2?2:a,i.styleStroke.strokeWidth=a+"px",i.styleStroke.stroke=e.outlineColor),e.strokeWidth=a||0,E(e.aplStats,R.pathLabel.stats),e.updateColor(t),e.updatePath(t),e.updateStartOffset(t),Ie&&I(t,{}),e.updateShow(t)},bind:function(e,t){var n=t.props;return e.color||y(n,"cur_line_color",e.updateColor),y(n,"cur_line_strokeWidth",e.updatePath),y(n,"apl_path",e.updatePath),e.semIndex="startLabel"===t.optionName?0:"endLabel"===t.optionName?1:2,(2!==e.semIndex||e.lineOffset)&&y(n,"cur_attach_plugBackLenSE",e.updateStartOffset),y(n,"svgShow",e.updateShow),Ie&&y(n,"new_edge4viewBox",e.adjustEdge),R.pathLabel.initSvg(e,n),!0},unbind:function(e,t){var n=t.props;e.elmsAppend&&(e.elmsAppend.forEach(function(e){n.svg.removeChild(e)}),e.elmPosition=e.elmPath=e.elmOffset=e.styleFill=e.styleShow=e.elmsAppend=null),E(e.curStats,R.pathLabel.stats),E(e.aplStats,R.pathLabel.stats),e.color||g(n,"cur_line_color",e.updateColor),g(n,"cur_line_strokeWidth",e.updatePath),g(n,"apl_path",e.updatePath),(2!==e.semIndex||e.lineOffset)&&g(n,"cur_attach_plugBackLenSE",e.updateStartOffset),g(n,"svgShow",e.updateShow),Ie&&(g(n,"new_edge4viewBox",e.adjustEdge),I(n,{}))},removeOption:function(e,t){var n=t.props,a={};a[t.optionName]="",N(n,a)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach(function(t){R.pathLabel.unbind(e,t)}))}}},Object.keys(R).forEach(function(e){T[e]=function(){return new F(R[e],Array.prototype.slice.call(arguments))}}),T.positionByWindowResize=!0,window.addEventListener("resize",Be.add(function(){T.positionByWindowResize&&Object.keys(De).forEach(function(e){I(De[e],{position:!0})})}),!1),T}(),l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=t(function(e){(function(){var t,n,a,i,o,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-o)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),r=1e9*process.uptime(),o=i-r):Date.now?(e.exports=function(){return Date.now()-a},a=Date.now()):(e.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(l)}),u="undefined"==typeof window?l:window,h=["moz","webkit"],c="AnimationFrame",p=u["request"+c],d=u["cancel"+c]||u["cancelRequest"+c],f=0;!p&&f<h.length;f++)p=u[h[f]+"Request"+c],d=u[h[f]+"Cancel"+c]||u[h[f]+"CancelRequest"+c];if(!p||!d){var m=0,y=0,g=[];p=function(e){if(0===g.length){var t=s(),n=Math.max(0,1e3/60-(t-m));m=n+t,setTimeout(function(){var e=g.slice(0);g.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(m)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return g.push({handle:++y,callback:e,cancelled:!1}),y},d=function(e){for(var t=0;t<g.length;t++)g[t].handle===e&&(g[t].cancelled=!0)}}var S=function(e){return p.call(u,e)};S.cancel=function(){d.apply(u,arguments)},S.polyfill=function(e){e||(e=u),e.requestAnimationFrame=p,e.cancelAnimationFrame=d};t(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(){if(!(this instanceof e))return new e;this.relative=!1,this.commands=[]}function t(e){var t=e.length>0&&e.slice?e:Array.prototype.slice.call(arguments,0);this.name=t[0],this.args=t.slice(1)}var n=["M","Z","L","H","V","C","S","Q","T","A"],a=n.map(function(e){return e.toLowerCase()}),i=n.concat(a);return e.prototype.rel=function(){return this.relative=!0,this},e.prototype.abs=function(){return this.relative=!1,this},e.prototype.close=function(){return this.Z()},e.prototype.to=function(e,t){var n="object"==typeof e?e:{x:e,y:t};return this._cmd("M")(n.x,n.y)},e.prototype.line=function(e,t){var n="object"==typeof e?e:{x:e,y:t};return this._cmd("L")(n.x,n.y)},e.prototype.hline=function(e){return this._cmd("H")(e)},e.prototype.vline=function(e){return this._cmd("V")(e)},e.prototype.bezier3=function(e,t,n,a,i,o){var r="object"==typeof e,l=r?arguments.length<3:arguments.length<6,s={x:e,y:t},u={x:n,y:a},h=l?u:{x:i,y:o};return r&&(s=e,u=t,h=l?u:n),l?this._cmd("S")(s.x,s.y,h.x,h.y):this._cmd("C")(s.x,s.y,u.x,u.y,h.x,h.y)},e.prototype.bezier2=function(e,t,n,a){var i="object"==typeof e,o=i?arguments.length<2:arguments.length<4,r={x:e,y:t},l=o?r:{x:n,y:a};return i&&(r=e,l=o?r:t),o?this._cmd("T")(l.x,l.y):this._cmd("Q")(r.x,r.y,l.x,l.y)},e.prototype.arc=function(e,t,n,a,i,o,r){var l="object"==typeof o?o:{x:o,y:r};return this._cmd("A")(e,t,n,a,i,l.x,l.y)},e.prototype.str=function(){return this.commands.map(function(e){return e.toString()}).join(" ")},i.forEach(function(n){e.prototype[n]=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(n);var a=new t(e);return this.commands.push(a),this}}),e.prototype._cmd=function(e){return this[this.relative?e.toLowerCase():e.toUpperCase()].bind(this)},t.prototype.toString=function(){return this.name+" "+this.args.join(" ")},e})}),function(){function e(e){this.value=e}function t(t){function n(i,o){try{var r=t[i](o),l=r.value;l instanceof e?Promise.resolve(l.value).then(function(e){n("next",e)},function(e){n("throw",e)}):a(r.done?"return":"normal",r.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(e,t){return new Promise(function(a,r){var l={key:e,arg:t,resolve:a,reject:r,next:null};o?o=o.next=l:(i=o=l,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();var v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),x=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=function(){function e(t){v(this,e),t=n(t),this.flow=[t]}return _(e,[{key:"next",value:function(e){e=n(e),this.flow.push(e)}},{key:"getNext",value:function(e){e=n(e);var t=this.flow.indexOf(e);if(-1===t)throw new Error("Could not find '"+e+"' in this flow");return t===this.flow.length?null:this.flow[t+1]}}]),e}(),E="#fff",w=["text","textContainer","coachTop","coachLeft","coachRight","coachBottom","glow","actionButton","svg","path"];!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t)}}(".coachmark {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0;\n  padding: 0;\n  /*background: #000;*/\n  /*opacity: 0.60;*/\n  z-index: 100; }\n\n.coachmark-top,\n.coachmark-left,\n.coachmark-right,\n.coachmark-bottom {\n  position: fixed;\n  background: #000;\n  opacity: 0.66;\n  margin: 0;\n  padding: 0; }\n\n.coachmark-top {\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%; }\n\n.coachmark-left {\n  left: 0; }\n\n.coachmark-right {\n  right: 0; }\n\n.coachmark-bottom {\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%; }\n\n.coachmark-glow {\n  position: absolute;\n  /*z-index: 101;*/\n  /*box-shadow: 0 0 120px 50px #fff;*/ }\n\n.coachmark-text-container {\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5vmin; }\n\n.coachmark-text {\n  font-size: 15vmin;\n  font-family: 'Indie Flower', cursive;\n  line-height: 15vmin;\n  color: #fefefe;\n  text-shadow: 2px 2px #333;\n  z-index: 2; }\n\n.coachmark-svg {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 1; }\n\n.coachmark-line, .leader-line-line-path {\n  stroke: #fff;\n  stroke-width: 1vmin;\n  stroke-linecap: round; }\n\npath.coachmark-line {\n  stroke-width: 1vmin;\n  stroke-linecap: round; }\n\n.coachmark-action-btn {\n  z-index: 9999;\n  border-radius: 50%;\n  border: 3px solid #fff;\n  height: 56px;\n  width: 56px;\n  position: fixed;\n  top: 0;\n  right: 0;\n  color: #fff;\n  margin: 5vmin;\n  font-size: 36px;\n  line-height: 51px;\n  text-align: center;\n  cursor: pointer;\n  box-shadow: 0 2px 2px 0 rgba(255, 255, 255, 0.12), 0 1px 5px 0 rgba(255, 255, 255, 0.12), 0 3px 1px -2px rgba(255, 255, 255, 0.2); }\n\n.coachmark-next-button use {\n  fill: #fff; }\n\n/* Override Leader-Line Settings */\n.leader-line-plugs-face {\n  marker-end: url(#arrowhead0) !important;\n  stroke-width: 1px; }\n\n.leader-line path {\n  filter: 'url(#coachmark-chalk)'; }\n\npath.coachmark-marker {\n  stroke: #fff;\n  stroke-width: 1.33vmin;\n  stroke-linecap: round; }\n");var k='  <defs>\n    <filter id="coachmark-chalk" x="0" y="0" height="5000px" width="5000px" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse">\n      <feTurbulence baseFrequency="0.133" seed="500" result="result1" numOctaves="1" type="turbulence"/>\n      <feOffset result="result2" dx="0" dy="0"/>\n      <feDisplacementMap scale="5" yChannelSelector="G" in2="result1" xChannelSelector="R" in="SourceGraphic"/>\n      <feGaussianBlur stdDeviation="0.5"/>\n    </filter>\n    <filter id="coachmark-chalk-rough" filterUnits="userSpaceOnUse" x="0" y="0" height="5000px" width="5000px">\n      <feTurbulence baseFrequency="0.2" numOctaves="3" type="fractalNoise" />\n      <feDisplacementMap  scale="8"  xChannelSelector="R" in="SourceGraphic" />\n    </filter>\n    <marker id="arrow" class="coachmark-line" markerWidth="500" markerHeight="800" refX="9.5" refY="4.5" orient="auto" overflow="visible" markerUnits="userSpaceOnUse">\n      \x3c!--<path d="M0,0 L0,6 L9,3 z" stroke="#fff" fill="#fff" />--\x3e\n      \x3c!--<polyline points="-2,-2 0,0 -2,2" stroke="#fff" fill="none" vector-effect="non-scaling-stroke" />--\x3e\n\n      \x3c!-- <polyline points="1 1, 9 5, 1 7" fill="none" /> --\x3e\n      <polyline points="1 1.5, 10 4.5, 2 7" fill="none" stroke-linecap="round" />\n    </marker>\n\n    <marker id="arrowhead0" viewBox="0 0 60 60" refX="50" refY="30" markerUnits="strokeWidth" markerWidth="8" markerHeight="10" orient="auto" overflow="visible">\n      <path d="M 0 0 L 60 30 L 0 60" fill="none" class="coachmark-marker" />\n    </marker>\n\n    \x3c!-- NOTE: arrowhead is not being used --\x3e\n    \x3c!-- <marker id="arrowhead" viewBox="0 0 10 10" refX="3" refY="5" markerWidth="6" markerHeight="6" orient="auto">\n      <path d="M 0 0 L 10 5 L 0 10 z" />\n    </marker> --\x3e\n\n    <filter id="coachmark-drop-shadow" x="0" y="0" height="5000px" width="5000px">\n       <feOffset result="offOut" in="SourceAlpha" dx="0" dy="5" />\n       <feGaussianBlur result="blurOut" in="offOut" stdDeviation="3" />\n       <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n    </filter>\n\n    <filter id="test-filter">\n      <feMorphology operator="dilate" radius="4" in="SourceAlpha" result="BEVEL_10" />\n      <feConvolveMatrix order="3,3" kernelMatrix=\n   "1 0 0\n   0 1 0\n   0 0 1" in="BEVEL_10" result="BEVEL_20" />\n      <feOffset dx="10" dy="10" in="BEVEL_20" result="BEVEL_30"/>\n      <feComposite operator="out" in="BEVEL_20" in2="BEVEL_10" result="BEVEL_30"/>\n      <feFlood flood-color="#fff" result="COLOR-red" />\n      <feComposite in="COLOR-red" in2="BEVEL_30" operator="in" result="BEVEL_40" />\n\n      <feMerge result="BEVEL_50">\n         <feMergeNode in="BEVEL_40" />\n         <feMergeNode in="SourceGraphic" />\n      </feMerge>\n    </filter>\n\n    <path id="right-arrow" d="M 345.23509 500.5 L 594.16634 251.00371 L 344.26968 1.468574 L 205.81581 1.525764 L 397.12537 194.51019 L 0.49999607 194.58168 L 0.62293607 305.57099 L 399.73581 305.59147 L 206.36939 500.5 L 345.23509 500.5 z "/>\n  </defs>\n';document.addEventListener("DOMContentLoaded",function(){!function(){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://fonts.googleapis.com/css?family=Indie+Flower"),document.head.appendChild(e)}(),function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("width",0),e.setAttribute("height",0),e.innerHTML=k,document.body.insertBefore(e,document.body.firstChild)}(),window.addEventListener("resize",function(){requestAnimationFrame(function(){i()})})}),window.CoachmarkCache=e.cache;return{add:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"!=typeof t&&(n=t,t=Math.random().toString(36).substr(2)),e("mark."+t,n)},show:function(e){a(),o(e)},cache:function(){return e.cache},draw:o,redrawAll:i,flow:function(t){var n=e("mark."+t);if(!n)throw new Error("Could not find coachmark named '"+t+"'. Make sure you create it before building a flow with it");var a=new b(t);return n.flow=a,a}}});
//# sourceMappingURL=coachmarks.min.js.map
